# –ê–Ω–∞–ª—ñ–∑ –∞–ª–≥–æ—Ä–∏—Ç–º—É —Ä–æ–±–æ—Ç–∏ ArUco-–º–∞—Ä–∫–µ—Ä—ñ–≤ —É WebAR-–ø—Ä–æ–µ–∫—Ç—ñ

## –í—Å—Ç—É–ø

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î –∞–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö –≤—ñ–¥ **ArUco-–º–∞—Ä–∫–µ—Ä—ñ–≤** —É WebAR-–ø—Ä–æ–µ–∫—Ç—ñ, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É **js-aruco2** –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –º–∞—Ä–∫–µ—Ä—ñ–≤ —Ç–∞ **POSIT** –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ 3D-–ø–æ–∑–∏.

**–í–∞–∂–ª–∏–≤–æ:** –¶–µ–π –∞–Ω–∞–ª—ñ–∑ —Å—Ç–æ—Å—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ **–æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ js-aruco2**. –§–∞–π–ª `js/aruco.js` —î –æ–∫—Ä–µ–º–æ—é —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é –∑ Three.js, —Å—Ç–≤–æ—Ä–µ–Ω–æ—é –ø—ñ–∑–Ω—ñ—à–µ, —ñ –Ω–µ —î —á–∞—Å—Ç–∏–Ω–æ—é js-aruco2.

–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ **AR.js (artoolkit)**, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è barcode-–º–∞—Ä–∫–µ—Ä—ñ–≤, **ArUco-–º–∞—Ä–∫–µ—Ä–∏** –º–∞—é—Ç—å –≤–ª–∞—Å–Ω–∏–π –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Ç –æ–±—Ä–æ–±–∫–∏.

---

## 1. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º–∏

### 1.1. –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

```
js-aruco2/ (–Ω–µ–∑–∞–ª–µ–∂–Ω–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è ArUco)
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ aruco.js          (–≥–æ–ª–æ–≤–Ω–∏–π –¥–µ—Ç–µ–∫—Ç–æ—Ä –º–∞—Ä–∫–µ—Ä—ñ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ cv.js             (–æ–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å)
‚îÇ   ‚îú‚îÄ‚îÄ posit1.js         (–æ—Ü—ñ–Ω–∫–∞ 3D –ø–æ–∑–∏ - –≤–∞—Ä—ñ–∞–Ω—Ç 1)
‚îÇ   ‚îú‚îÄ‚îÄ posit2.js         (–æ—Ü—ñ–Ω–∫–∞ 3D –ø–æ–∑–∏ - –≤–∞—Ä—ñ–∞–Ω—Ç 2)
‚îÇ   ‚îú‚îÄ‚îÄ svd.js            (SVD –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü—ñ—è)
‚îÇ   ‚îî‚îÄ‚îÄ dictionaries/     (—Å–ª–æ–≤–Ω–∏–∫–∏ –º–∞—Ä–∫–µ—Ä—ñ–≤)
‚îÇ       ‚îú‚îÄ‚îÄ aruco_4x4_1000.js
‚îÇ       ‚îú‚îÄ‚îÄ aruco_5x5_1000.js
‚îÇ       ‚îú‚îÄ‚îÄ aruco_6x6_1000.js
‚îÇ       ‚îú‚îÄ‚îÄ aruco_7x7_1000.js
‚îÇ       ‚îú‚îÄ‚îÄ aruco_mip_36h12.js
‚îÇ       ‚îú‚îÄ‚îÄ apriltag_*.js
‚îÇ       ‚îî‚îÄ‚îÄ ...
```

### 1.2. –ö–ª—é—á–æ–≤—ñ —Ñ–∞–π–ª–∏

| –§–∞–π–ª | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|------|-------------|
| `js-aruco2/src/aruco.js` | –ì–æ–ª–æ–≤–Ω–∏–π –¥–µ—Ç–µ–∫—Ç–æ—Ä ArUco-–º–∞—Ä–∫–µ—Ä—ñ–≤ |
| `js-aruco2/src/cv.js` | –ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∏–π –∑—ñ—Ä: —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è, –ø–æ—Ä–æ–≥–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞, –∫–æ–Ω—Ç—É—Ä–∏ |
| `js-aruco2/src/posit1.js` | POSIT –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ 3D –ø–æ–∑–∏ (–≤–∞—Ä—ñ–∞–Ω—Ç 1) |
| `js-aruco2/src/posit2.js` | POSIT –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ 3D –ø–æ–∑–∏ (–≤–∞—Ä—ñ–∞–Ω—Ç 2) |
| `js-aruco2/src/svd.js` | SVD (Singular Value Decomposition) –¥–ª—è POSIT |
| `js-aruco2/src/dictionaries/` | –°–ª–æ–≤–Ω–∏–∫–∏ –º–∞—Ä–∫–µ—Ä—ñ–≤ (ARUCO, ARUCO_MIP_36h12, AprilTag, —Ç–æ—â–æ) |

---

## 2. –ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è ArUco-–º–∞—Ä–∫–µ—Ä—ñ–≤

### 2.1. –ï—Ç–∞–ø 1: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞

**–§–∞–π–ª:** `js-aruco2/src/aruco.js` (–∫–ª–∞—Å `AR.Detector`)

```javascript
AR.Detector = function (config) {
  config = config || {};
  this.grey = new CV.Image();
  this.thres = new CV.Image();
  this.homography = new CV.Image();
  this.binary = [];
  this.contours = [];
  this.polys = [];
  this.candidates = [];
  config.dictionaryName = config.dictionaryName || 'ARUCO_MIP_36h12';
  this.dictionary = new AR.Dictionary(config.dictionaryName);
  this.dictionary.tau = config.maxHammingDistance != null 
    ? config.maxHammingDistance 
    : this.dictionary.tau;
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –µ–∫–∑–µ–º–ø–ª—è—Ä `AR.Detector` –∑ –≤–∫–∞–∑–∞–Ω–∏–º —Å–ª–æ–≤–Ω–∏–∫–æ–º
2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è `AR.Dictionary` –∑ –∫–æ–¥–∞–º–∏ –º–∞—Ä–∫–µ—Ä—ñ–≤
3. –í—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞ –¥–ª—è –∫–æ—Ä–µ–∫—Ü—ñ—ó –ø–æ–º–∏–ª–æ–∫
4. –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –¥–æ–ø–æ–º—ñ–∂–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ (grey, thres, homography)

---

### 2.2. –ï—Ç–∞–ø 2: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

**–§–∞–π–ª:** `js-aruco2/src/aruco.js` (–º–µ—Ç–æ–¥ `detect`)

```javascript
AR.Detector.prototype.detect = function (image) {
  // 1. –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ –≤—ñ–¥—Ç—ñ–Ω–∫–∏ —Å—ñ—Ä–æ–≥–æ
  CV.grayscale(image, this.grey);
  
  // 2. –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ –ø–æ—Ä–æ–≥–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞
  CV.adaptiveThreshold(this.grey, this.thres, 2, 7);

  // 3. –ü–æ—à—É–∫ –∫–æ–Ω—Ç—É—Ä—ñ–≤
  this.contours = CV.findContours(this.thres, this.binary);
  
  // 4. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤
  this.candidates = this.findCandidates(this.contours, 
                                         image.width * 0.01, 
                                         0.05, 10);
  
  // 5. –í–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –∫—É—Ç—ñ–≤ –∑–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫–æ–≤–æ—é —Å—Ç—Ä—ñ–ª–∫–æ—é
  this.candidates = this.clockwiseCorners(this.candidates);
  
  // 6. –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–Ω–∞–¥—Ç–æ –±–ª–∏–∑—å–∫–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤
  this.candidates = this.notTooNear(this.candidates, 10);

  // 7. –ü–æ—à—É–∫ –º–∞—Ä–∫–µ—Ä—ñ–≤ —Å–µ—Ä–µ–¥ –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤
  return this.findMarkers(this.grey, this.candidates, 49);
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. **–í—Ö—ñ–¥–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è** (ImageData –∑ –∫–∞–º–µ—Ä–∏) –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è
2. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è **–ø–æ–ø–µ—Ä–µ–¥–Ω—è –æ–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è** (—Å—ñ—Ä–∏–π –º–∞—Å—à—Ç–∞–±, –ø–æ—Ä—ñ–≥)
3. –ó–Ω–∞–π–¥–µ–Ω—ñ –∫–æ–Ω—Ç—É—Ä–∏ —Ñ—ñ–ª—å—Ç—Ä—É—é—Ç—å—Å—è –¥–ª—è –ø–æ—à—É–∫—É –∫–≤–∞–¥—Ä–∞—Ç–Ω–∏—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤
4. –†–µ–∑—É–ª—å—Ç–∞—Ç: –º–∞—Å–∏–≤ –º–∞—Ä–∫–µ—Ä—ñ–≤ –∑ ID —Ç–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∫—É—Ç—ñ–≤

---

### 2.3. –ï—Ç–∞–ø 3: –ü–æ–ø–µ—Ä–µ–¥–Ω—è –æ–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

**–§–∞–π–ª:** `js-aruco2/src/cv.js`

#### 2.3.1. –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —É –≤—ñ–¥—Ç—ñ–Ω–∫–∏ —Å—ñ—Ä–æ–≥–æ

```javascript
CV.grayscale = function(imageSrc, imageDst){
  var src = imageSrc.data, dst = imageDst.data, len = src.length,
      i = 0, j = 0;

  for (; i < len; i += 4){
    dst[j ++] =
      (src[i] * 0.299 + src[i + 1] * 0.587 + src[i + 2] * 0.114 + 0.5) & 0xff;
  }

  imageDst.width = imageSrc.width;
  imageDst.height = imageSrc.height;

  return imageDst;
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –ö–æ–∂–µ–Ω –ø—ñ–∫—Å–µ–ª—å RGBA –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —É –≤—ñ–¥—Ç—ñ–Ω–æ–∫ —Å—ñ—Ä–æ–≥–æ –∑–∞ —Ñ–æ—Ä–º—É–ª–æ—é:
  ```
  Gray = 0.299√óR + 0.587√óG + 0.114√óB
  ```
- –¶–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ –¥–ª—è –ª—é–¥—Å—å–∫–æ–≥–æ –æ–∫–∞ (–∑–µ–ª–µ–Ω–∏–π –º–∞—î –±—ñ–ª—å—à—É –≤–∞–≥—É)
- –ê–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è

#### 2.3.2. –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ –ø–æ—Ä–æ–≥–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞

```javascript
CV.adaptiveThreshold = function(imageSrc, imageDst, kernelSize, threshold){
  var src = imageSrc.data, dst = imageDst.data, len = src.length, tab = [], i;

  // –†–æ–∑–º–∏—Ç—Ç—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥—É
  CV.stackBoxBlur(imageSrc, imageDst, kernelSize);

  // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ –ø–æ—Ä–æ–≥–æ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å
  for (i = 0; i < 768; ++ i){
    tab[i] = (i - 255 <= -threshold)? 255: 0;
  }

  // –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–æ—Ä–æ–≥—É
  for (i = 0; i < len; ++ i){
    dst[i] = tab[ src[i] - dst[i] + 255 ];
  }

  imageDst.width = imageSrc.width;
  imageDst.height = imageSrc.height;

  return imageDst;
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–æ–∑–º–∏–≤–∞—î—Ç—å—Å—è (Stack Box Blur) –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è **–ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥—É**
2. –ö–æ–∂–µ–Ω –ø—ñ–∫—Å–µ–ª—å –ø–æ—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è –∑ –ª–æ–∫–∞–ª—å–Ω–∏–º —Å–µ—Ä–µ–¥–Ω—ñ–º –Ω–∞–≤–∫–æ–ª–æ –Ω—å–æ–≥–æ
3. –†–µ–∑—É–ª—å—Ç–∞—Ç: –±—ñ–Ω–∞—Ä–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (0 –∞–±–æ 255)
4. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –ø–æ—Ä—ñ–≥** –∫—Ä–∞—â–µ –ø—Ä–∞—Ü—é—î –ø—Ä–∏ –∑–º—ñ–Ω–Ω–æ–º—É –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—ñ –Ω—ñ–∂ –≥–ª–æ–±–∞–ª—å–Ω–∏–π –ø–æ—Ä—ñ–≥

---

### 2.4. –ï—Ç–∞–ø 4: –ü–æ—à—É–∫ –∫–æ–Ω—Ç—É—Ä—ñ–≤ —Ç–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤

**–§–∞–π–ª:** `js-aruco2/src/cv.js`

#### 2.4.1. –ü–æ—à—É–∫ –∫–æ–Ω—Ç—É—Ä—ñ–≤

```javascript
CV.findContours = function(image, binary){
  // –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—à—É–∫—É –∫–æ–Ω—Ç—É—Ä—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
  // –ü–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤ –∫–æ–Ω—Ç—É—Ä—ñ–≤ (–∫–æ–∂–µ–Ω –∫–æ–Ω—Ç—É—Ä - –º–∞—Å–∏–≤ —Ç–æ—á–æ–∫)
};
```

#### 2.4.2. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤

**–§–∞–π–ª:** `js-aruco2/src/aruco.js`

```javascript
AR.Detector.prototype.findCandidates = function (contours, minSize, epsilon, minLength) {
  var candidates = [],
      len = contours.length,
      contour, poly, i;

  this.polys = [];

  for (i = 0; i < len; ++i) {
    contour = contours[i];

    if (contour.length >= minSize) {
      // –ê–ø—Ä–æ–∫—Å–∏–º–∞—Ü—ñ—è –ø–æ–ª—ñ–≥–æ–Ω—É (–∑–º–µ–Ω—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–æ—á–æ–∫)
      poly = CV.approxPolyDP(contour, contour.length * epsilon);

      this.polys.push(poly);

      // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: —á–∏ —î 4 –∫—É—Ç–∏ —Ç–∞ –æ–ø—É–∫–ª–∏–π
      if ((4 === poly.length) && (CV.isContourConvex(poly))) {

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: —á–∏ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –≤–µ–ª–∏–∫–∏–π
        if (CV.minEdgeLength(poly) >= minLength) {
          candidates.push(poly);
        }
      }
    }
  }

  return candidates;
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. **–ê–ø—Ä–æ–∫—Å–∏–º–∞—Ü—ñ—è –ø–æ–ª—ñ–≥–æ–Ω—É:** –∑–º–µ–Ω—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–æ—á–æ–∫ —É –∫–æ–Ω—Ç—É—Ä—ñ (–∞–ª–≥–æ—Ä–∏—Ç–º Douglas-Peucker)
2. **–§—ñ–ª—å—Ç—Ä –∑–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∫—É—Ç—ñ–≤:** –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ 4-–∫—É—Ç–Ω–∏–∫–∏
3. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–ø—É–∫–ª–æ—Å—Ç—ñ:** –º–∞—Ä–∫–µ—Ä –º–∞—î –±—É—Ç–∏ –æ–ø—É–∫–ª–∏–º (–Ω–µ —É–≤—ñ–≥–Ω—É—Ç–∏–º)
4. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑–º—ñ—Ä—É:** –≤—ñ–¥–∫–∏–¥–∞—é—Ç—å—Å—è –∑–∞–Ω–∞–¥—Ç–æ –º–∞–ª—ñ –∫–æ–Ω—Ç—É—Ä–∏ (–º–µ–Ω—à–µ minLength)

---

### 2.5. –ï—Ç–∞–ø 5: –í–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –∫—É—Ç—ñ–≤ —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤

**–§–∞–π–ª:** `js-aruco2/src/aruco.js`

#### 2.5.1. –í–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –∑–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫–æ–≤–æ—é —Å—Ç—Ä—ñ–ª–∫–æ—é

```javascript
AR.Detector.prototype.clockwiseCorners = function (candidates) {
  var len = candidates.length,
      dx1, dx2, dy1, dy2, swap, i;

  for (i = 0; i < len; ++i) {
    dx1 = candidates[i][1].x - candidates[i][0].x;
    dy1 = candidates[i][1].y - candidates[i][0].y;
    dx2 = candidates[i][2].x - candidates[i][0].x;
    dy2 = candidates[i][2].y - candidates[i][0].y;

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –¥–æ–±—É—Ç–∫—É
    if ((dx1 * dy2 - dy1 * dx2) < 0) {
      // –ú—ñ–Ω—è—î–º–æ –º—ñ—Å—Ü—è–º–∏ –∫—É—Ç–∏ 1 —ñ 3
      swap = candidates[i][1];
      candidates[i][1] = candidates[i][3];
      candidates[i][3] = swap;
    }
  }

  return candidates;
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –í–µ–∫—Ç–æ—Ä–Ω–∏–π –¥–æ–±—É—Ç–æ–∫ –≤–∏–∑–Ω–∞—á–∞—î –æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—é –∫—É—Ç—ñ–≤
- –Ø–∫—â–æ –∫—É—Ç–∏ –Ω–µ –≤–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω—ñ –∑–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫–æ–≤–æ—é —Å—Ç—Ä—ñ–ª–∫–æ—é - –º—ñ–Ω—è—î–º–æ –º—ñ—Å—Ü—è–º–∏
- –¶–µ –≤–∞–∂–ª–∏–≤–æ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è ID –º–∞—Ä–∫–µ—Ä–∞

#### 2.5.2. –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–Ω–∞–¥—Ç–æ –±–ª–∏–∑—å–∫–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤

```javascript
AR.Detector.prototype.notTooNear = function (candidates, minDist) {
  var notTooNear = [],
      len = candidates.length,
      dist, dx, dy, i, j, k;

  for (i = 0; i < len; ++i) {
    for (j = i + 1; j < len; ++j) {
      dist = 0;

      // –û–±—á–∏—Å–ª–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–Ω—å–æ—ó –≤—ñ–¥—Å—Ç–∞–Ω—ñ –º—ñ–∂ –∫—É—Ç–∞–º–∏
      for (k = 0; k < 4; ++k) {
        dx = candidates[i][k].x - candidates[j][k].x;
        dy = candidates[i][k].y - candidates[j][k].y;
        dist += dx * dx + dy * dy;
      }

      // –Ø–∫—â–æ –∑–∞–Ω–∞–¥—Ç–æ –±–ª–∏–∑—å–∫–æ - –∑–∞–ª–∏—à–∞—î–º–æ –±—ñ–ª—å—à–∏–π –º–∞—Ä–∫–µ—Ä
      if ((dist / 4) < (minDist * minDist)) {
        if (CV.perimeter(candidates[i]) < CV.perimeter(candidates[j])) {
          candidates[i].tooNear = true;
        } else {
          candidates[j].tooNear = true;
        }
      }
    }
  }

  // –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
  for (i = 0; i < len; ++i) {
    if (!candidates[i].tooNear) {
      notTooNear.push(candidates[i]);
    }
  }

  return notTooNear;
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
- –û–±—á–∏—Å–ª—é—î—Ç—å—Å—è —Å–µ—Ä–µ–¥–Ω—è –≤—ñ–¥—Å—Ç–∞–Ω—å –º—ñ–∂ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º–∏ –∫—É—Ç–∞–º–∏ –¥–≤–æ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤
- –Ø–∫—â–æ –º–∞—Ä–∫–µ—Ä–∏ –∑–∞–Ω–∞–¥—Ç–æ –±–ª–∏–∑—å–∫–æ - –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –±—ñ–ª—å—à–∏–π (–∑–∞ –ø–µ—Ä–∏–º–µ—Ç—Ä–æ–º)
- –¶–µ –∑–∞–ø–æ–±—ñ–≥–∞—î –ø–æ–¥–≤—ñ–π–Ω–æ–º—É –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—é –æ–¥–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞

---

### 2.6. –ï—Ç–∞–ø 6: –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è ID –º–∞—Ä–∫–µ—Ä–∞

**–§–∞–π–ª:** `js-aruco2/src/aruco.js`

#### 2.6.1. –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è

```javascript
AR.Detector.prototype.findMarkers = function (imageSrc, candidates, warpSize) {
  var markers = [],
      len = candidates.length,
      candidate, marker, i;

  for (i = 0; i < len; ++i) {
    candidate = candidates[i];

    // –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è (–≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞)
    CV.warp(imageSrc, this.homography, candidate, warpSize);

    // –ü–æ—Ä–æ–≥–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –≤–∏—Ä—ñ–≤–Ω—è–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    CV.threshold(this.homography, this.homography, CV.otsu(this.homography));

    // –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è ID –º–∞—Ä–∫–µ—Ä–∞
    marker = this.getMarker(this.homography, candidate);
    if (marker) {
      markers.push(marker);
    }
  }

  return markers;
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. –ó–Ω–∞–π–¥–µ–Ω–∏–π –∫–∞–Ω–¥–∏–¥–∞—Ç (4 –∫—É—Ç–∏) –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è —É –∫–≤–∞–¥—Ä–∞—Ç (warpSize√ówarpSize –ø—ñ–∫—Å–µ–ª—ñ–≤)
2. –¶–µ –∫–æ–º–ø–µ–Ω—Å—É—î –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ñ —Å–ø–æ—Ç–≤–æ—Ä–µ–Ω–Ω—è (–º–∞—Ä–∫–µ—Ä –º–æ–∂–µ –±—É—Ç–∏ –ø—ñ–¥ –∫—É—Ç–æ–º)
3. –†–µ–∑—É–ª—å—Ç–∞—Ç: –≤–∏—Ä—ñ–≤–Ω—è–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 49√ó49 –ø—ñ–∫—Å–µ–ª—ñ–≤)

#### 2.6.2. –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è –±—ñ—Ç—ñ–≤

**–§–∞–π–ª:** `js-aruco2/src/aruco.js`

```javascript
AR.Detector.prototype.getMarker = function (imageSrc, candidate) {
  var markSize = this.dictionary.markSize;
  var width = (imageSrc.width / markSize) >>> 0,
      minZero = (width * width) >> 1,
      bits = [],
      rotations = [],
      square, inc, i, j;

  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–æ–≤–Ω—ñ—à–Ω—å–æ—ó —Ä–∞–º–∫–∏ (–º–∞—î –±—É—Ç–∏ —á–æ—Ä–Ω–æ—é)
  for (i = 0; i < markSize; ++i) {
    inc = (0 === i || (markSize - 1) === i) ? 1 : (markSize - 1);

    for (j = 0; j < markSize; j += inc) {
      square = {
        x: j * width,
        y: i * width,
        width: width,
        height: width
      };
      if (CV.countNonZero(imageSrc, square) > minZero) {
        return null; // –ó–æ–≤–Ω—ñ—à–Ω—è —Ä–∞–º–∫–∞ –Ω–µ —á–æ—Ä–Ω–∞
      }
    }
  }

  // –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö –±—ñ—Ç—ñ–≤
  for (i = 0; i < markSize - 2; ++i) {
    bits[i] = [];

    for (j = 0; j < markSize - 2; ++j) {
      square = {
        x: (j + 1) * width,
        y: (i + 1) * width,
        width: width,
        height: width
      };
      bits[i][j] = CV.countNonZero(imageSrc, square) > minZero ? 1 : 0;
    }
  }

  // –ü–æ—à—É–∫ ID —É —Å–ª–æ–≤–Ω–∏–∫—É (–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø–æ–≤–æ—Ä–æ—Ç—ñ–≤)
  var minFound = this.dictionary.find(bits);
  if (minFound) {
    return new AR.Marker(minFound.id, candidate, minFound.distance);
  }

  return null;
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–æ–≤–Ω—ñ—à–Ω—å–æ—ó —Ä–∞–º–∫–∏:** –º–∞—î –±—É—Ç–∏ —á–æ—Ä–Ω–æ—é (—ñ–Ω–∞–∫—à–µ —Ü–µ –Ω–µ –º–∞—Ä–∫–µ—Ä)
2. **–î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è –±—ñ—Ç—ñ–≤:** –∫–æ–∂–Ω–∞ –∫–ª—ñ—Ç–∏–Ω–∫–∞ –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó —Å—ñ—Ç–∫–∏ (markSize-2)√ó(markSize-2) –∞–Ω–∞–ª—ñ–∑—É—î—Ç—å—Å—è
3. **–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –Ω–µ–Ω—É–ª—å–æ–≤–∏—Ö –ø—ñ–∫—Å–µ–ª—ñ–≤:** —è–∫—â–æ –±—ñ–ª—å—à–µ –ø–æ–ª–æ–≤–∏–Ω–∏ - –±—ñ—Ç = 1, —ñ–Ω–∞–∫—à–µ 0
4. **–ü–æ—à—É–∫ —É —Å–ª–æ–≤–Ω–∏–∫—É:** –∑–Ω–∞–π–¥–µ–Ω–∞ –±—ñ—Ç–æ–≤–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø–æ—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è –∑ –∫–æ–¥–∞–º–∏ —Å–ª–æ–≤–Ω–∏–∫–∞
5. **–í—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –ø–æ–≤–æ—Ä–æ—Ç—ñ–≤:** –º–∞—Ä–∫–µ—Ä –º–æ–∂–µ –±—É—Ç–∏ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω–∏–π —É 4 –ø–æ–ª–æ–∂–µ–Ω–Ω—è—Ö (0¬∞, 90¬∞, 180¬∞, 270¬∞)
6. **–í—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞:** –¥–æ–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø–µ–≤–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Å–ª–æ–≤–Ω–∏–∫–∞)

---

### 2.7. –ï—Ç–∞–ø 7: –û—Ü—ñ–Ω–∫–∞ 3D –ø–æ–∑–∏ (POSIT)

**–§–∞–π–ª:** `js-aruco2/src/posit1.js`

```javascript
POS.Posit = function(modelSize, focalLength){
  this.objectPoints = this.buildModel(modelSize);
  this.focalLength = focalLength;

  this.objectVectors = [];
  this.objectNormal = [];
  this.objectMatrix = [[],[],[]];

  this.init();
};

POS.Posit.prototype.buildModel = function(modelSize){
  var half = modelSize / 2.0;

  // 4 –∫—É—Ç–∏ –º–∞—Ä–∫–µ—Ä–∞ —É 3D –ø—Ä–æ—Å—Ç–æ—Ä—ñ (–≤—ñ–¥–Ω–æ—Å–Ω–æ —Ü–µ–Ω—Ç—Ä—É)
  return [
    [-half,  half, 0.0],  // –í–µ—Ä—Ö–Ω—ñ–π –ª—ñ–≤–∏–π
    [ half,  half, 0.0],  // –í–µ—Ä—Ö–Ω—ñ–π –ø—Ä–∞–≤–∏–π
    [ half, -half, 0.0],  // –ù–∏–∂–Ω—ñ–π –ø—Ä–∞–≤–∏–π
    [-half, -half, 0.0]   // –ù–∏–∂–Ω—ñ–π –ª—ñ–≤–∏–π
  ];
};
```

#### 2.7.1. –ê–ª–≥–æ—Ä–∏—Ç–º POSIT

**–§–∞–π–ª:** `js-aruco2/src/posit1.js`

```javascript
POS.Posit.prototype.pose = function(imagePoints){
  var posRotation1 = [[],[],[]], posRotation2 = [[],[],[]], posTranslation = [],
      rotation1 = [[],[],[]], rotation2 = [[],[],[]], 
      translation1 = [], translation2 = [],
      error1, error2, valid1, valid2, i, j;

  // 1. –ü–æ—á–∞—Ç–∫–æ–≤–∞ –æ—Ü—ñ–Ω–∫–∞ –ø–æ–∑–∏ (–∞–ª–≥–æ—Ä–∏—Ç–º POS)
  this.pos(imagePoints, posRotation1, posRotation2, posTranslation);

  // 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ
  valid1 = this.isValid(posRotation1, posTranslation);
  if (valid1){
    // 3. –Ü—Ç–µ—Ä–∞—Ç–∏–≤–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è (–∞–ª–≥–æ—Ä–∏—Ç–º POSIT)
    error1 = this.iterate(imagePoints, posRotation1, posTranslation, 
                          rotation1, translation1);
  }

  // –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞–π–∫—Ä–∞—â–æ—ó –ø–æ–∑–∏
  return {
    bestRotation: rotation1,
    bestTranslation: translation1,
    bestError: error1
  };
};
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
1. **–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:** 4 –∫—É—Ç–∏ –º–∞—Ä–∫–µ—Ä–∞ –Ω–∞ 2D –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ (–Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ, —Ü–µ–Ω—Ç—Ä —É (0,0))
2. **–í—ñ–¥–æ–º—ñ –¥–∞–Ω—ñ:** 4 –∫—É—Ç–∏ –º–∞—Ä–∫–µ—Ä–∞ —É 3D –ø—Ä–æ—Å—Ç–æ—Ä—ñ (–º–æ–¥–µ–ª—å –∑ buildModel)
3. **–ê–ª–≥–æ—Ä–∏—Ç–º POS (Pose from Orthography and Scaling):**
   - –ü–æ—á–∞—Ç–∫–æ–≤–∞ –æ—Ü—ñ–Ω–∫–∞ –ø–æ–∑–∏ –∑ –ø—Ä–∏–ø—É—â–µ–Ω–Ω—è–º –æ—Ä—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–æ—ó –ø—Ä–æ–µ–∫—Ü—ñ—ó
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î SVD –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü—ñ—é –¥–ª—è —Ä–æ–∑–≤'—è–∑–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Ä—ñ–≤–Ω—è–Ω—å
4. **–ê–ª–≥–æ—Ä–∏—Ç–º POSIT (POS with Iterations):**
   - –Ü—Ç–µ—Ä–∞—Ç–∏–≤–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∏
   - –ö–æ–∂–Ω–∞ —ñ—Ç–µ—Ä–∞—Ü—ñ—è –º—ñ–Ω—ñ–º—ñ–∑—É—î –ø–æ–º–∏–ª–∫—É –º—ñ–∂ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏ —Ç–∞ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
   - –ó–±—ñ–∂–Ω—ñ—Å—Ç—å –∑–∞ 4-8 —ñ—Ç–µ—Ä–∞—Ü—ñ–π
5. **–í–∏—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:**
   - –ú–∞—Ç—Ä–∏—Ü—è –æ–±–µ—Ä—Ç–∞–Ω–Ω—è 3√ó3
   - –í–µ–∫—Ç–æ—Ä –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è (X, Y, Z)
   - –ü–æ–º–∏–ª–∫–∞ –æ—Ü—ñ–Ω–∫–∏

---

### 2.8. –ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–±–æ—Ç–∏ POSIT –¥–ª—è ArUco-–º–∞—Ä–∫–µ—Ä–∞ 4√ó4 (—Ä–æ–∑–º—ñ—Ä 80–º–º)

**–§–∞–π–ª:** `js-aruco2/src/posit1.js`

```
–í–•–Ü–î–ù–Ü –î–ê–ù–Ü:

1. 3D-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∫—É—Ç—ñ–≤ –º–∞—Ä–∫–µ—Ä–∞ (—É –º–µ—Ç—Ä–∞—Ö, –≤—ñ–¥–Ω–æ—Å–Ω–æ —Ü–µ–Ω—Ç—Ä—É –º–∞—Ä–∫–µ—Ä–∞):
   –¢–æ—á–∫–∞ 0: (-0.04,  0.04, 0)  // –í–µ—Ä—Ö–Ω—ñ–π –ª—ñ–≤–∏–π –∫—É—Ç
   –¢–æ—á–∫–∞ 1: ( 0.04,  0.04, 0)  // –í–µ—Ä—Ö–Ω—ñ–π –ø—Ä–∞–≤–∏–π –∫—É—Ç
   –¢–æ—á–∫–∞ 2: ( 0.04, -0.04, 0)  // –ù–∏–∂–Ω—ñ–π –ø—Ä–∞–≤–∏–π –∫—É—Ç
   –¢–æ—á–∫–∞ 3: (-0.04, -0.04, 0)  // –ù–∏–∂–Ω—ñ–π –ª—ñ–≤–∏–π –∫—É—Ç

2. 2D-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ (—É –ø—ñ–∫—Å–µ–ª—è—Ö, –∫–∞–º–µ—Ä–∞ 640x480):
   –¢–æ—á–∫–∞ 0: (245, 180)  // –í–µ—Ä—Ö–Ω—ñ–π –ª—ñ–≤–∏–π –∫—É—Ç
   –¢–æ—á–∫–∞ 1: (395, 185)  // –í–µ—Ä—Ö–Ω—ñ–π –ø—Ä–∞–≤–∏–π –∫—É—Ç
   –¢–æ—á–∫–∞ 2: (390, 305)  // –ù–∏–∂–Ω—ñ–π –ø—Ä–∞–≤–∏–π –∫—É—Ç
   –¢–æ—á–∫–∞ 3: (240, 300)  // –ù–∏–∂–Ω—ñ–π –ª—ñ–≤–∏–π –∫—É—Ç

3. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∫–∞–º–µ—Ä–∏:
   –§–æ–∫—É—Å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å: f = 640 (—Ñ–æ–∫—É—Å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å —É –ø—ñ–∫—Å–µ–ª—è—Ö)
   –û–ø—Ç–∏—á–Ω–∏–π —Ü–µ–Ω—Ç—Ä: cx = 320, cy = 240

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–í–ò–•–Ü–î–ù–Ü –î–ê–ù–Ü (–ø—ñ—Å–ª—è 5 —ñ—Ç–µ—Ä–∞—Ü—ñ–π POSIT):

–ú–∞—Ç—Ä–∏—Ü—è –æ–±–µ—Ä—Ç–∞–Ω–Ω—è (3√ó3):
‚îå                                      ‚îê
‚îÇ  0.985  -0.165   0.052  ‚îÇ  –ü–æ–≤–æ—Ä–æ—Ç X: ~3¬∞
‚îÇ  0.028   0.098  -0.995  ‚îÇ  –ü–æ–≤–æ—Ä–æ—Ç Y: ~86¬∞
‚îÇ -0.170  -0.985  -0.035  ‚îÇ  –ü–æ–≤–æ—Ä–æ—Ç Z: ~-10¬∞
‚îî                                      ‚îò

–í–µ–∫—Ç–æ—Ä –ø–æ–∑–∏—Ü—ñ—ó (3√ó1):
‚îå       ‚îê
‚îÇ 0.12  ‚îÇ  X = 12 —Å–º (–ø—Ä–∞–≤–æ—Ä—É—á –≤—ñ–¥ –∫–∞–º–µ—Ä–∏)
‚îÇ 0.05  ‚îÇ  Y = 5 —Å–º (–≤–∏—â–µ –≤—ñ–¥ –∫–∞–º–µ—Ä–∏)
‚îÇ 0.45  ‚îÇ  Z = 45 —Å–º (–≥–ª–∏–±–∏–Ω–∞/–≤—ñ–¥—Å—Ç–∞–Ω—å)
‚îî       ‚îò

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

–Ü–ù–¢–ï–†–ü–†–ï–¢–ê–¶–Ü–Ø:
- –ú–∞—Ä–∫–µ—Ä –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—ñ 45 —Å–º –≤—ñ–¥ –∫–∞–º–µ—Ä–∏
- –ó–º—ñ—â–µ–Ω–∏–π –Ω–∞ 12 —Å–º –ø—Ä–∞–≤–æ—Ä—É—á —ñ –Ω–∞ 5 —Å–º –≤–∏—â–µ —Ü–µ–Ω—Ç—Ä—É
- –ü–æ–≤–µ—Ä–Ω—É—Ç–∏–π –Ω–∞ ~86¬∞ –Ω–∞–≤–∫–æ–ª–æ –æ—Å—ñ Y (–º–∞–π–∂–µ –ø—Ä–æ—Ñ—ñ–ª—å)
- –ù–µ–≤–µ–ª–∏–∫–∏–π –Ω–∞—Ö–∏–ª –≤–ø–µ—Ä–µ–¥ (~3¬∞) —ñ –≤–ª—ñ–≤–æ (~-10¬∞)
```

---

### 2.9. –Ø–∫ —Ü–µ–π –ø—Ä–∏–∫–ª–∞–¥ POSIT –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ AR –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—î—é

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              –ü–û–í–ù–ò–ô –õ–ê–ù–¶–Æ–ñ–û–ö AR (–Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ)               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                             ‚îÇ
‚îÇ  1. –ö–ê–ú–ï–†–ê —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ –∑–∞—Ö–æ–ø–ª—é—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è                   ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ     ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ  [245,180] ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óè [395,185]  ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ            ‚îÇ       ‚îÇ            ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ            ‚îÇ ArUco ‚îÇ            ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ            ‚îÇMarker ‚îÇ            ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ            ‚îÇ       ‚îÇ            ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ  [240,300] ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óè [390,305]  ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ        2D-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∫—É—Ç—ñ–≤ –º–∞—Ä–∫–µ—Ä–∞          ‚îÇ        ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ                            ‚Üì                                ‚îÇ
‚îÇ  2. js-aruco2 –¥–µ—Ç–µ–∫—Ç—É—î –º–∞—Ä–∫–µ—Ä —Ç–∞ –æ–±—á–∏—Å–ª—é—î ID               ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ     ‚îÇ  ID: 0                                      ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  Corners: [(245,180), (395,185), ...]       ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  Hamming Distance: 0                        ‚îÇ        ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ                            ‚Üì                                ‚îÇ
‚îÇ  3. POS.Posit.pose() –æ–±—á–∏—Å–ª—é—î 3D –ø–æ–∑–∏—Ü—ñ—é                   ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ     ‚îÇ  Rotation (3√ó3):                            ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ    0.985  -0.165   0.052                    ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ    0.028   0.098  -0.995                    ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ   -0.170  -0.985  -0.035                    ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  Translation: [0.12, 0.05, 0.45]            ‚îÇ        ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ                            ‚Üì                                ‚îÇ
‚îÇ  4. Three.js —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É—î –º–∞—Ç—Ä–∏—Ü—é (—ñ–Ω—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)  ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ     ‚îÇ  X = 0.12–º ‚Üí X = 0.12–º (—Ç–µ —Å–∞–º–µ)           ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  Y = 0.05–º ‚Üí Y = -0.05–º (—ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–æ)      ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  Z = 0.45–º ‚Üí Z = -0.45–º (—ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–æ)      ‚îÇ        ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ                            ‚Üì                                ‚îÇ
‚îÇ  5. Three.js —Å—Ç–≤–æ—Ä—é—î 3D-–æ–±'—î–∫—Ç (–∫–æ–Ω—É—Å) —É —Ü—ñ–π –ø–æ–∑–∏—Ü—ñ—ó       ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ     ‚îÇ           ‚ñ≤                                 ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ          /|\  –ö–æ–Ω—É—Å (–∑–µ–ª–µ–Ω–∏–π)              ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ           |   –í–∏—Å–æ—Ç–∞: 1 –æ–¥–∏–Ω–∏—Ü—è            ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ           |   –ü–æ–∑–∏—Ü—ñ—è: (0.12, -0.05, -0.45)‚îÇ        ‚îÇ
‚îÇ     ‚îÇ          / \                                ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ         /___\                               ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ        [–ú–ê–†–ö–ï–†]                             ‚îÇ        ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ                            ‚Üì                                ‚îÇ
‚îÇ  6. –í—ñ–¥–µ–æ + 3D –æ–±'—î–¥–Ω—É—é—Ç—å—Å—è –Ω–∞ –µ–∫—Ä–∞–Ω—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞            ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ     ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ        ‚îÇ       ‚îÇ                ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ        ‚îÇ  üü©   ‚îÇ ‚Üê 3D –∫–æ–Ω—É—Å     ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ        ‚îÇ  ‚ñ≤    ‚îÇ   –ø–æ–≤–µ—Ä—Ö       ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ        ‚îÇ  ‚îÇ    ‚îÇ   –º–∞—Ä–∫–µ—Ä–∞      ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ  ‚îÇ   ArUco Marker    ‚îÇ          ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ  ‚îÇ      ID: 0        ‚îÇ          ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ        ‚îÇ
‚îÇ     ‚îÇ        –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å AR! üéâ            ‚îÇ        ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### 2.10. –ü—Ä–∏–∫–ª–∞–¥ –º–∞—Ç—Ä–∏—Ü—ñ –æ–±–µ—Ä—Ç–∞–Ω–Ω—è —Ç–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó

**–†–µ–∑—É–ª—å—Ç–∞—Ç POS.Posit.pose():**

```
–ú–∞—Ç—Ä–∏—Ü—è –æ–±–µ—Ä—Ç–∞–Ω–Ω—è (3√ó3) —Ç–∞ –≤–µ–∫—Ç–æ—Ä –ø–æ–∑–∏—Ü—ñ—ó:

‚îå                                                      ‚îê
‚îÇ  0.985  -0.165   0.052   ‚îÇ  0.12  ‚îÇ  X-–ø–æ–∑–∏—Ü—ñ—è (12 —Å–º) ‚îÇ
‚îÇ  0.028   0.098  -0.995   ‚îÇ  0.05  ‚îÇ  Y-–ø–æ–∑–∏—Ü—ñ—è (5 —Å–º)  ‚îÇ
‚îÇ -0.170  -0.985  -0.035   ‚îÇ  0.45  ‚îÇ  Z-–ø–æ–∑–∏—Ü—ñ—è (45 —Å–º) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ï–ª–µ–º–µ–Ω—Ç–∏ –º–∞—Ç—Ä–∏—Ü—ñ [row, column]:
[0,0], [1,0], [2,0] ‚Äî –í–µ–∫—Ç–æ—Ä –ø—Ä–∞–≤–æ—ó –æ—Å—ñ (X-–æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—è)
[0,1], [1,1], [2,1] ‚Äî –í–µ–∫—Ç–æ—Ä –≤–µ—Ä—Ö–Ω—å–æ—ó –æ—Å—ñ (Y-–æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—è)
[0,2], [1,2], [2,2] ‚Äî –í–µ–∫—Ç–æ—Ä –≤–ø–µ—Ä–µ–¥–Ω—å–æ—ó –æ—Å—ñ (Z-–æ—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—è)
[0,3], [1,3], [2,3] ‚Äî –ü–æ–∑–∏—Ü—ñ—è (X, Y, Z) —É –º–µ—Ç—Ä–∞—Ö –≤—ñ–¥–Ω–æ—Å–Ω–æ –∫–∞–º–µ—Ä–∏
```

**–£ —Ñ–æ—Ä–º–∞—Ç—ñ JavaScript (–º–∞—Å–∏–≤–∏):**

```javascript
// –ú–∞—Ç—Ä–∏—Ü—è –æ–±–µ—Ä—Ç–∞–Ω–Ω—è 3√ó3 (row-major order)
var rotation = [
    [0.985, -0.165,  0.052],  // Row 0
    [0.028,  0.098, -0.995],  // Row 1
    [-0.170, -0.985, -0.035]  // Row 2
];

// –í–µ–∫—Ç–æ—Ä –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è (X, Y, Z)
var translation = [0.12, 0.05, 0.45];

// –î–ª—è Three.js (—ñ–Ω–≤–µ—Ä—Ç—É—î–º–æ Z)
var position = new THREE.Vector3(
    translation[0],   // X = 0.12–º
    -translation[1],  // Y = -0.05–º (—ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–æ)
    -translation[2]   // Z = -0.45–º (—ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–æ)
);
```

**–Ü–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—è –ø—Ä–∏–∫–ª–∞–¥—É:**
- **–ü–æ–∑–∏—Ü—ñ—è –º–∞—Ä–∫–µ—Ä–∞:** X=0.12–º, Y=0.05–º, Z=0.45–º (12—Å–º –ø—Ä–∞–≤–æ—Ä—É—á, 5—Å–º –≤–∏—â–µ, 45—Å–º –≥–ª–∏–±–∏–Ω–∞)
- **–û–±–µ—Ä—Ç–∞–Ω–Ω—è:** –ú–∞—Ä–∫–µ—Ä –ø–æ–≤–µ—Ä–Ω—É—Ç–∏–π –Ω–∞ ~3¬∞ –Ω–∞–≤–∫–æ–ª–æ X, ~86¬∞ –Ω–∞–≤–∫–æ–ª–æ Y, ~-10¬∞ –Ω–∞–≤–∫–æ–ª–æ Z
- **–†–æ–∑–º—ñ—Ä:** –ú–∞—Ä–∫–µ—Ä –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—ñ 45 —Å–º –≤—ñ–¥ –∫–∞–º–µ—Ä–∏

---

### 2.11. –ï—Ç–∞–ø 8: –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è

**–§–∞–π–ª:** `js-aruco2/src/aruco.js`

```javascript
// –î–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –æ–¥–Ω–∏–º –≤–∏–∫–ª–∏–∫–æ–º
var markers = detector.detect(imageData);

// –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ ID
var marker0 = markers.find(m => m.id === 0);
```

**–ü—Ä–∏–∫–ª–∞–¥: –†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –Ω–æ–≤–∏–º —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞–Ω–∏–º –º–∞—Ä–∫–µ—Ä–æ–º:**

```
–ö–ê–î–† 1 (–º–∞—Ä–∫–µ—Ä —â–æ–π–Ω–æ –∑'—è–≤–∏–≤—Å—è):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ detect() - –ø–æ–≤–Ω–µ –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è          ‚îÇ
‚îÇ 1. Grayscale + Threshold               ‚îÇ
‚îÇ 2. FindContours                        ‚îÇ
‚îÇ 3. FindCandidates                      ‚îÇ
‚îÇ 4. Decode ID                           ‚îÇ
‚îÇ 5. POSIT (5-7 —ñ—Ç–µ—Ä–∞—Ü—ñ–π)                ‚îÇ
‚îÇ –†–µ–∑—É–ª—å—Ç–∞—Ç: X=0.12, Y=0.05, Z=0.45     ‚îÇ
‚îÇ –°—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å: —Å–µ—Ä–µ–¥–Ω—è (–º–æ–∂–µ "—Å—Ç—Ä–∏–±–∞—Ç–∏")‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ö–ê–î–† 2-60 (–º–∞—Ä–∫–µ—Ä –≤—ñ–¥—Å—Ç–µ–∂—É—î—Ç—å—Å—è):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ detect() - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ      ‚îÇ
‚îÇ –¥–∞–Ω—ñ –¥–ª—è –∫—Ä–∞—â–æ—ó —Å—Ç–∞–±—ñ–ª—å–Ω–æ—Å—Ç—ñ           ‚îÇ
‚îÇ 1. Grayscale + Threshold               ‚îÇ
‚îÇ 2. FindContours                        ‚îÇ
‚îÇ 3. FindCandidates                        ‚îÇ
‚îÇ 4. Decode ID                           ‚îÇ
‚îÇ 5. POSIT (2-3 —ñ—Ç–µ—Ä–∞—Ü—ñ—ó, —à–≤–∏–¥—à–µ)        ‚îÇ
‚îÇ –†–µ–∑—É–ª—å—Ç–∞—Ç: X=0.12, Y=0.05, Z=0.45     ‚îÇ
‚îÇ –°—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å: –≤–∏—Å–æ–∫–∞ (–ø–ª–∞–≤–Ω–∞ –∑–º—ñ–Ω–∞)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ö–ê–î–† 61 (–º–∞—Ä–∫–µ—Ä –∑–Ω–∏–∫ —ñ –∑'—è–≤–∏–≤—Å—è –∑–Ω–æ–≤—É):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ detect() - –∑–Ω–æ–≤—É –ø–æ–≤–Ω–µ –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è    ‚îÇ
‚îÇ 1. Grayscale + Threshold               ‚îÇ
‚îÇ 2. FindContours                        ‚îÇ
‚îÇ 3. FindCandidates                        ‚îÇ
‚îÇ 4. Decode ID                           ‚îÇ
‚îÇ 5. POSIT (5-7 —ñ—Ç–µ—Ä–∞—Ü—ñ–π)                ‚îÇ
‚îÇ –†–µ–∑—É–ª—å—Ç–∞—Ç: X=0.12, Y=0.05, Z=0.45     ‚îÇ
‚îÇ –°—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å: —Å–µ—Ä–µ–¥–Ω—è                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç—ñ (—ñ–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—è):**

```javascript
// –Ü—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—è –ø–æ–∑–∏—Ü—ñ—ó (LERP) –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç—ñ
this.currentPosition.lerp(this.targetPosition, this.lerpFactor);

// –Ü—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—è –∫–≤–∞—Ç–µ—Ä–Ω—ñ–æ–Ω–∞ (SLERP) –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –æ–±–µ—Ä—Ç–∞–Ω–Ω—è
this.currentQuaternion.slerp(this.targetQuaternion, this.lerpFactor);

// lerpFactor = 0.1 ‚Üí –¥—É–∂–µ –ø–ª–∞–≤–Ω–æ, –∞–ª–µ –∑ –∑–∞—Ç—Ä–∏–º–∫–æ—é
// lerpFactor = 0.5 ‚Üí –±–∞–ª–∞–Ω—Å –º—ñ–∂ –ø–ª–∞–≤–Ω—ñ—Å—Ç—é —Ç–∞ –≤—ñ–¥–≥—É–∫–æ–º
// lerpFactor = 1.0 ‚Üí –±–µ–∑ —ñ–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—ó (–º–∏—Ç—Ç—î–≤–æ, –∞–ª–µ –º–æ–∂–µ "—Å—Ç—Ä–∏–±–∞—Ç–∏")
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –¶—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ Three.js (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É —Ñ–∞–π–ª—ñ `js/aruco.js`), –∞ –Ω–µ –≤ —Å–∞–º—ñ–π –±—ñ–±–ª—ñ–æ—Ç–µ—Ü—ñ js-aruco2.

---

## 3. –ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö

### 3.1. –î—ñ–∞–≥—Ä–∞–º–∞ –ø–æ—Ç–æ–∫—É –¥–∞–Ω–∏—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –ö–ê–ú–ï–†–ê (–≤–µ–±-–∫–∞–º–µ—Ä–∞)                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ImageData (RGBA –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è)                                ‚îÇ
‚îÇ  - –û—Ç—Ä–∏–º—É—î–º–æ –∑ canvas.getContext('2d').getImageData()       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AR.Detector.detect()                                       ‚îÇ
‚îÇ  1. CV.grayscale() - –≤—ñ–¥—Ç—ñ–Ω–∫–∏ —Å—ñ—Ä–æ–≥–æ (RGBA ‚Üí Gray)          ‚îÇ
‚îÇ  2. CV.adaptiveThreshold() - –ø–æ—Ä–æ–≥–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞               ‚îÇ
‚îÇ  3. CV.findContours() - –ø–æ—à—É–∫ –∫–æ–Ω—Ç—É—Ä—ñ–≤                      ‚îÇ
‚îÇ  4. findCandidates() - —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è 4-–∫—É—Ç–Ω–∏–∫—ñ–≤               ‚îÇ
‚îÇ  5. clockwiseCorners() - –≤–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –∫—É—Ç—ñ–≤               ‚îÇ
‚îÇ  6. notTooNear() - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  findMarkers()                                              ‚îÇ
‚îÇ  1. CV.warp() - –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è                 ‚îÇ
‚îÇ  2. CV.threshold() - –ø–æ—Ä–æ–≥–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞                       ‚îÇ
‚îÇ  3. getMarker() - –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è ID                            ‚îÇ
‚îÇ     - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–æ–≤–Ω—ñ—à–Ω—å–æ—ó —Ä–∞–º–∫–∏                            ‚îÇ
‚îÇ     - –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è –±—ñ—Ç—ñ–≤                                     ‚îÇ
‚îÇ     - –ü–æ—à—É–∫ —É —Å–ª–æ–≤–Ω–∏–∫—É –∑ –≤—ñ–¥—Å—Ç–∞–Ω–Ω—é –•–µ–º–º—ñ–Ω–≥–∞                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  POS.Posit.pose() (–¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞)                     ‚îÇ
‚îÇ  1. pos() - –ø–æ—á–∞—Ç–∫–æ–≤–∞ –æ—Ü—ñ–Ω–∫–∞ (POS)                          ‚îÇ
‚îÇ  2. iterate() - —ñ—Ç–µ—Ä–∞—Ç–∏–≤–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è (POSIT)                ‚îÇ
‚îÇ  3. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è: rotation (3√ó3), translation (X,Y,Z)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –†–µ–∑—É–ª—å—Ç–∞—Ç: –º–∞—Å–∏–≤ AR.Marker –æ–±'—î–∫—Ç—ñ–≤                        ‚îÇ
‚îÇ  - id: ID –º–∞—Ä–∫–µ—Ä–∞                                           ‚îÇ
‚îÇ  - corners: 4 –∫—É—Ç–∏ –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ                            ‚îÇ
‚îÇ  - hammingDistance: –≤—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞ (—è–∫—ñ—Å—Ç—å —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è)‚îÇ
‚îÇ  - pose: rotation, translation (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è POSIT)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### 3.2. –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –ø–æ–¥—ñ–π —É —á–∞—Å—ñ

| –ß–∞—Å | –ü–æ–¥—ñ—è |
|-----|-------|
| T0 | –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è `AR.Detector` —Ç–∞ `POS.Posit` (–æ–¥–∏–Ω —Ä–∞–∑) |
| T1 | –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–µ–æ–ø–æ—Ç–æ–∫—É –∑ –∫–∞–º–µ—Ä–∏ |
| T2 | **–¶–∏–∫–ª –æ–±—Ä–æ–±–∫–∏ –∫–∞–¥—Ä—ñ–≤ (30-60 FPS):** |
| T2.1 | - –û—Ç—Ä–∏–º–∞–Ω–Ω—è ImageData –∑ –≤—ñ–¥–µ–æ |
| T2.2 | - `AR.Detector.detect()` - –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ |
| T2.3 | - –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞: `findMarkers()` - –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è ID |
| T2.4 | - –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞: `POSIT.pose()` - –æ—Ü—ñ–Ω–∫–∞ 3D –ø–æ–∑–∏ |
| T2.5 | - –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –º–∞—Å–∏–≤—É –º–∞—Ä–∫–µ—Ä—ñ–≤ –∑ ID, –∫—É—Ç–∞–º–∏ —Ç–∞ –ø–æ–∑–∏—Ü—ñ—î—é |
| T3 | –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Three.js (–æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª `js/aruco.js`) |

---

## 4. –ü—Ä–∏–∫–ª–∞–¥: ArUco-–º–∞—Ä–∫–µ—Ä 4√ó4

### 4.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞—Ä–∫–µ—Ä–∞ ARUCO_4X4_1000

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚îÇ ‚Üê –ó–æ–≤–Ω—ñ—à–Ω—è —Ä–∞–º–∫–∞ (—á–æ—Ä–Ω–∞)
‚îÇ ‚ñà ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñà ‚îÇ
‚îÇ ‚ñà ‚ñë‚ñë‚ñë  1   0   1   0   0   ‚ñà ‚îÇ
‚îÇ ‚ñà ‚ñë‚ñë‚ñë  0   1   1   0   1   ‚ñà ‚îÇ ‚Üê –í–Ω—É—Ç—Ä—ñ—à–Ω—è —Å—ñ—Ç–∫–∞ 5√ó5 (25 –±—ñ—Ç)
‚îÇ ‚ñà ‚ñë‚ñë‚ñë  1   1   0   1   0   ‚ñà ‚îÇ
‚îÇ ‚ñà ‚ñë‚ñë‚ñë  0   0   1   0   1   ‚ñà ‚îÇ
‚îÇ ‚ñà ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñë‚ñë‚ñë ‚ñà ‚îÇ
‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- **–†–æ–∑–º—ñ—Ä:** 7√ó7 –∫–ª—ñ—Ç–∏–Ω–æ–∫ (4√ó4 –≤–Ω—É—Ç—Ä—ñ—à–Ω—è —Å—ñ—Ç–∫–∞ + 2 –∫–ª—ñ—Ç–∏–Ω–∫–∏ —Ä–∞–º–∫–∞)
- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç:** 16 (4√ó4)
- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º–∞—Ä–∫–µ—Ä—ñ–≤:** 1000
- **–í—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞:** 3 (–º–æ–∂–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ 1 –ø–æ–º–∏–ª–∫—É)

### 4.2. –©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—ñ

1. **–ö–∞–º–µ—Ä–∞** –∑–∞—Ö–æ–ø–ª—é—î –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ ArUco-–º–∞—Ä–∫–µ—Ä–æ–º
2. **CV.grayscale()** - –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —É –≤—ñ–¥—Ç—ñ–Ω–∫–∏ —Å—ñ—Ä–æ–≥–æ
3. **CV.adaptiveThreshold()** - –±—ñ–Ω–∞—Ä–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
4. **CV.findContours()** - –∑–Ω–∞–π–¥–µ–Ω–æ –∫–æ–Ω—Ç—É—Ä –º–∞—Ä–∫–µ—Ä–∞
5. **findCandidates()** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞: 4 –∫—É—Ç–∏, –æ–ø—É–∫–ª–∏–π, –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –≤–µ–ª–∏–∫–∏–π
6. **clockwiseCorners()** - –≤–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –∫—É—Ç—ñ–≤
7. **CV.warp()** - –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞ —É –∫–≤–∞–¥—Ä–∞—Ç 49√ó49
8. **getMarker()** - –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è 16 –±—ñ—Ç –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ—ó —Å—ñ—Ç–∫–∏
9. **dictionary.find()** - –ø–æ—à—É–∫ ID —É —Å–ª–æ–≤–Ω–∏–∫—É (–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø–æ–≤–æ—Ä–æ—Ç—ñ–≤)
10. **POSIT.pose()** - –æ—Ü—ñ–Ω–∫–∞ 3D –ø–æ–∑–∏ (X, Y, Z, –æ–±–µ—Ä—Ç–∞–Ω–Ω—è)

---

## 5. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ BarCode-–º–∞—Ä–∫–µ—Ä–∞–º–∏

### 5.1. –ö–ª—é—á–æ–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | ArUco-–º–∞—Ä–∫–µ—Ä | Barcode-–º–∞—Ä–∫–µ—Ä (AR.js) |
|----------------|--------------|------------------------|
| **–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞** | js-aruco2 (–Ω–µ–∑–∞–ª–µ–∂–Ω–∞) | AR.js (artoolkit) |
| **–°–ª–æ–≤–Ω–∏–∫–∏** | ARUCO, ARUCO_MIP_36h12, AprilTag, —Ç–æ—â–æ | 3x3, 4x4 –º–∞—Ç—Ä–∏—á–Ω—ñ –∫–æ–¥–∏ |
| **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º–∞—Ä–∫–µ—Ä—ñ–≤** | –î–æ 1000 (ARUCO_4X4_1000) | 512 (3x3) |
| **–°—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫** | –í—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞ (–¥–æ 12 –±—ñ—Ç) | –û–±–º–µ–∂–µ–Ω–∞ |
| **–î–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è** | –ö–æ–Ω—Ç—É—Ä–∏ + –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è | –®–∞–±–ª–æ–Ω–Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è |
| **–û—Ü—ñ–Ω–∫–∞ –ø–æ–∑–∏** | POSIT (–Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π) | –í–±—É–¥–æ–≤–∞–Ω–∏–π —É ARToolKit |
| **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** | –û–∫—Ä–µ–º–∏–π API (`AR.Detector`) | –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∑ AR.js |
| **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** | –î–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –æ–¥–Ω–∏–º –≤–∏–∫–ª–∏–∫–æ–º | –û–∫—Ä–µ–º–∏–π —Å–ª—É—Ö–∞—á –ø–æ–¥—ñ–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ |

### 5.2. –î–µ—Ç–∞–ª—å–Ω–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤

#### 5.2.1. –ü—Ä–æ—Ü–µ—Å –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è

**ArUco-–º–∞—Ä–∫–µ—Ä–∏:**
```
1. Grayscale ‚Üí 2. AdaptiveThreshold ‚Üí 3. FindContours ‚Üí 
4. FindCandidates (4-–∫—É—Ç–Ω–∏–∫–∏) ‚Üí 5. ClockwiseCorners ‚Üí 
6. NotTooNear ‚Üí 7. Warp (–≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è) ‚Üí 8. Decode Bits ‚Üí 
9. Dictionary.Find (Hamming) ‚Üí 10. POSIT.pose()
```

**Barcode-–º–∞—Ä–∫–µ—Ä–∏ (AR.js):**
```
1. Process Image ‚Üí 2. DetectMarker ‚Üí 3. GetMarkerNum ‚Üí 
4. For each marker: trackBarcodeMarkerId() ‚Üí 
5. getTransMatSquare() / getTransMatSquareCont() ‚Üí 
6. transMatToGLMat() ‚Üí 7. Dispatch Event 'getMarker'
```

#### 5.2.2. –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π

**ArUco-–º–∞—Ä–∫–µ—Ä–∏:**
```javascript
// –î–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –æ–¥–Ω–∏–º –≤–∏–∫–ª–∏–∫–æ–º
var markers = detector.detect(imageData);

// –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ ID
var marker0 = markers.find(m => m.id === 0);
var marker1 = markers.find(m => m.id === 1);

// –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞ –æ–∫—Ä–µ–º–æ –æ–±—á–∏—Å–ª—é—î–º–æ –ø–æ–∑–∏—Ü—ñ—é
var pose = posit.pose(marker0.corners);
```

**Barcode-–º–∞—Ä–∫–µ—Ä–∏ (AR.js):**
```javascript
// –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Å–ª—É—Ö–∞—á–∞ –ø–æ–¥—ñ–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞
arController.addEventListener('getMarker', function(event) {
    if (event.data.type === artoolkit.BARCODE_MARKER &&
        event.data.marker.idMatrix === markerId) {
        onMarkerFound(event);
    }
});

// –ü–æ–¥—ñ—è –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –æ–∫—Ä–µ–º–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞
```

#### 5.2.3. –°—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫

**ArUco-–º–∞—Ä–∫–µ—Ä–∏:**
- **–í—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞:** –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç, —è–∫—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–æ–º–∏–ª–∫–æ–≤–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω—ñ
- **ARUCO_4X4_1000:** –≤—ñ–¥—Å—Ç–∞–Ω—å = 3 (–º–æ–∂–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ 1 –ø–æ–º–∏–ª–∫—É)
- **ARUCO_MIP_36h12:** –≤—ñ–¥—Å—Ç–∞–Ω—å = 12 (–º–æ–∂–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –¥–æ 5 –ø–æ–º–∏–ª–æ–∫)
- **–ü—Ä–∏–∫–ª–∞–¥:** —è–∫—â–æ –º–∞—Ä–∫–µ—Ä —á–∞—Å—Ç–∫–æ–≤–æ –∑–∞–∫—Ä–∏—Ç–∏–π –∞–±–æ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–π, –≤—Å–µ –æ–¥–Ω–æ –±—É–¥–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω–∏–π

**Barcode-–º–∞—Ä–∫–µ—Ä–∏ (AR.js):**
- **–ú–∞—Ç—Ä–∏—á–Ω—ñ –∫–æ–¥–∏ 3x3:** 9 –±—ñ—Ç —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
- **–í—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞:** –æ–±–º–µ–∂–µ–Ω–∞ (–º–µ–Ω—à–µ —Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫)
- **–ü—Ä–∏–∫–ª–∞–¥:** —è–∫—â–æ —á–∞—Å—Ç–∏–Ω–∞ –º–∞—Ä–∫–µ—Ä–∞ –∑–∞–∫—Ä–∏—Ç–∞ - –º–æ–∂–µ –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏—Å—è

#### 5.2.4. –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

**ArUco-–º–∞—Ä–∫–µ—Ä–∏:**
```
–û–¥–∏–Ω –≤–∏–∫–ª–∏–∫ detect() –¥–ª—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤:
- –ö–∞–¥—Ä 1: detect() ‚Üí [marker0, marker1, marker2] ‚Üí 3 –º–∞—Ä–∫–µ—Ä–∏ –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö—ñ–¥
- –ö–∞–¥—Ä 2: detect() ‚Üí [marker0, marker2] ‚Üí 2 –º–∞—Ä–∫–µ—Ä–∏ –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö—ñ–¥
- –ß–∞—Å –æ–±—Ä–æ–±–∫–∏: ~10-20 –º—Å –Ω–∞ –∫–∞–¥—Ä (640x480)
```

**Barcode-–º–∞—Ä–∫–µ—Ä–∏ (AR.js):**
```
–û–∫—Ä–µ–º–∏–π —Å–ª—É—Ö–∞—á –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞:
- –ö–∞–¥—Ä 1: process() ‚Üí event(marker0), event(marker1), event(marker2)
- –ö–∞–¥—Ä 2: process() ‚Üí event(marker0), event(marker2)
- –ß–∞—Å –æ–±—Ä–æ–±–∫–∏: ~15-30 –º—Å –Ω–∞ –∫–∞–¥—Ä (640x480)
```

#### 5.2.5. –ì–Ω—É—á–∫—ñ—Å—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

**ArUco-–º–∞—Ä–∫–µ—Ä–∏:**
```javascript
// –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –≤—ñ–¥—Å—Ç–∞–Ω—ñ –•–µ–º–º—ñ–Ω–≥–∞
var detector = new AR.Detector({
    dictionaryName: 'ARUCO_MIP_36h12',
    maxHammingDistance: 5  // –ë—ñ–ª—å—à –Ω–∞–¥—ñ–π–Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è
});

// –í–ª–∞—Å–Ω—ñ —Å–ª–æ–≤–Ω–∏–∫–∏
AR.DICTIONARIES.MyDictionary = {
    nBits: 25,
    tau: 3,
    codeList: ['0x1084210', '0x1084217', ...]
};
```

**Barcode-–º–∞—Ä–∫–µ—Ä–∏ (AR.js):**
```javascript
// –§—ñ–∫—Å–æ–≤–∞–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
arToolkitContext = new THREEx.ArToolkitContext({
    trackingBackend: 'artoolkit',
    detectionMode: 'mono_and_matrix',
    matrixCodeType: "3x3"  // –¢—ñ–ª—å–∫–∏ 3x3 –∞–±–æ 4x4
});

// –í–ª–∞—Å–Ω—ñ —Å–ª–æ–≤–Ω–∏–∫–∏ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è
```

### 5.3. –ü–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –Ω–µ–¥–æ–ª—ñ–∫–∏

#### ArUco-–º–∞—Ä–∫–µ—Ä–∏

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
1. ‚úÖ –ë—ñ–ª—å—à–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ (–¥–æ 1000+)
2. ‚úÖ –ö—Ä–∞—â–∞ —Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫ (–≤—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞ –¥–æ 12 –±—ñ—Ç)
3. ‚úÖ –°—É—á–∞—Å–Ω—ñ—à—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è (–∫–æ–Ω—Ç—É—Ä–∏ + –∞–ø—Ä–æ–∫—Å–∏–º–∞—Ü—ñ—è)
4. ‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö —Å–ª–æ–≤–Ω–∏–∫—ñ–≤
5. ‚úÖ –ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ AR.js (–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ Node.js)
6. ‚úÖ –î–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –æ–¥–Ω–∏–º –≤–∏–∫–ª–∏–∫–æ–º (—à–≤–∏–¥—à–µ)
7. ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Å–ª–æ–≤–Ω–∏–∫—ñ–≤ (ARUCO, AprilTag, ARTag, ChiliTags)

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
1. ‚ùå –ù–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∑ AR.js (–ø–æ—Ç—Ä—ñ–±–Ω–∞ –æ–∫—Ä–µ–º–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Three.js)
2. ‚ùå –í–∏–º–∞–≥–∞—î –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ (posit1.js, svd.js)
3. ‚ùå –ë—ñ–ª—å—à —Å–∫–ª–∞–¥–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—Å–ª–æ–≤–Ω–∏–∫–∏, —Ä–æ–∑–º—ñ—Ä–∏ –º–∞—Ä–∫–µ—Ä—ñ–≤)
4. ‚ùå –ú–µ–Ω—à–µ –≥–æ—Ç–æ–≤–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

#### Barcode-–º–∞—Ä–∫–µ—Ä–∏ (AR.js)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
1. ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∑ AR.js (–≥–æ—Ç–æ–≤–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Three.js)
2. ‚úÖ –ü—Ä–æ—Å—Ç—ñ—à–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—Ç—ñ–ª—å–∫–∏ ID –º–∞—Ä–∫–µ—Ä–∞)
3. ‚úÖ –ë—ñ–ª—å—à–µ –≥–æ—Ç–æ–≤–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
4. ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ pattern-–º–∞—Ä–∫–µ—Ä—ñ–≤ (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è-—à–∞–±–ª–æ–Ω–∏)
5. ‚úÖ –ì–ª–∞–¥–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è (getTransMatSquareCont)

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
1. ‚ùå –û–±–º–µ–∂–µ–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º–∞—Ä–∫–µ—Ä—ñ–≤ (512 –¥–ª—è 3x3)
2. ‚ùå –ú–µ–Ω—à–∞ —Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫
3. ‚ùå –®–∞–±–ª–æ–Ω–Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è (–ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ)
4. ‚ùå –û–∫—Ä–µ–º–∏–π —Å–ª—É—Ö–∞—á –ø–æ–¥—ñ–π –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞
5. ‚ùå –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö —Å–ª–æ–≤–Ω–∏–∫—ñ–≤

### 5.4. –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ ArUco –∑–∞–º—ñ—Å—Ç—å barcode

**–û–±–∏—Ä–∞–π—Ç–µ ArUco-–º–∞—Ä–∫–µ—Ä–∏, —è–∫—â–æ:**
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–æ –±–∞–≥–∞—Ç–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ (>512)
- ‚úÖ –í–∞–∂–ª–∏–≤–∞ —Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫ (–ø–æ–≥–∞–Ω–µ –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è, –∫—É—Ç–∏ –æ–≥–ª—è–¥—É)
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ–∑–∞ –±—Ä–∞—É–∑–µ—Ä–æ–º (Node.js, —Å–µ—Ä–≤–µ—Ä–Ω–∞ –æ–±—Ä–æ–±–∫–∞)
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –∫—Ä–∞—â–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (–¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –æ–¥–Ω–∏–º –≤–∏–∫–ª–∏–∫–æ–º)
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Å–ª–æ–≤–Ω–∏–∫—ñ–≤ (AprilTag, ARTag)

**–û–±–∏—Ä–∞–π—Ç–µ Barcode-–º–∞—Ä–∫–µ—Ä–∏ (AR.js), —è–∫—â–æ:**
- ‚úÖ –î–æ—Å—Ç–∞—Ç–Ω—å–æ 512 —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø—Ä–æ—Å—Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Three.js —á–µ—Ä–µ–∑ AR.js
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ pattern-–º–∞—Ä–∫–µ—Ä—ñ–≤ (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è-—à–∞–±–ª–æ–Ω–∏)
- ‚úÖ –ë—ñ–ª—å—à–µ –≥–æ—Ç–æ–≤–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
- ‚úÖ –ü—Ä–æ—Å—Ç—ñ—à–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—Ç—ñ–ª—å–∫–∏ ID –º–∞—Ä–∫–µ—Ä–∞)

### 5.5. –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É: –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞

**ArUco-–º–∞—Ä–∫–µ—Ä–∏:**
```javascript
var detector = new AR.Detector({
    dictionaryName: 'ARUCO_4X4_1000'
});

// –û–¥–∏–Ω –≤–∏–∫–ª–∏–∫ –¥–ª—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤
var markers = detector.detect(imageData);

// –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ ID
var marker0 = markers.find(m => m.id === 0);

if (marker0) {
    console.log('Marker 0 found!');
    console.log('Corners:', marker0.corners);
    console.log('Hamming Distance:', marker0.hammingDistance);
    
    // –û–±—á–∏—Å–ª–µ–Ω–Ω—è 3D –ø–æ–∑–∏
    var pose = posit.pose(marker0.corners);
    console.log('Position:', pose.bestTranslation);
}
```

**Barcode-–º–∞—Ä–∫–µ—Ä–∏ (AR.js):**
```javascript
// –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Å–ª—É—Ö–∞—á–∞ –ø–æ–¥—ñ–π
arController.addEventListener('getMarker', function(event) {
    if (event.data.type === artoolkit.BARCODE_MARKER &&
        event.data.marker.idMatrix === 0) {
        
        console.log('Marker 0 found!');
        console.log('Matrix:', event.data.matrix);
        
        // –ú–∞—Ç—Ä–∏—Ü—è –≤–∂–µ –º—ñ—Å—Ç–∏—Ç—å 3D –ø–æ–∑–∏—Ü—ñ—é
        var modelViewMatrix = new THREE.Matrix4()
            .fromArray(event.data.matrix);
    }
});

// –ú–∞—Ä–∫–µ—Ä–∏ –¥–µ—Ç–µ–∫—Ç—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞ –∫–æ–∂–Ω–æ–º—É –∫–∞–¥—Ä—ñ
arController.process(image);
```

---

## 6. –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –≤ js-aruco2

### 6.1. –°–ø—ñ–ª—å–Ω–∏–π –¥–µ—Ç–µ–∫—Ç–æ—Ä

```javascript
// –û–¥–∏–Ω –¥–µ—Ç–µ–∫—Ç–æ—Ä –¥–ª—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤
var detector = new AR.Detector({
    dictionaryName: 'ARUCO_4X4_1000'
});

// –î–µ—Ç–µ–∫—Ç—É—î–º–æ –≤—Å—ñ –º–∞—Ä–∫–µ—Ä–∏ –æ–¥–Ω–∏–º –≤–∏–∫–ª–∏–∫–æ–º
var markers = detector.detect(imageData);
```

### 6.2. –°–ø—ñ–ª—å–Ω–∏–π POSIT

```javascript
// –û–¥–∏–Ω POSIT –¥–ª—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –æ–¥–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É
var posit = new POS.Posit(modelSize, focalLength);

// –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞
var pose = posit.pose(corners);
```

### 6.3. –î–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –∫–∞–¥—Ä

```javascript
// –î–µ—Ç–µ–∫—Ç—É—î–º–æ –≤—Å—ñ –º–∞—Ä–∫–µ—Ä–∏ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –∫–∞–¥—Ä
var markers = detector.detect(imageData);

// –§—ñ–ª—å—Ç—Ä—É—î–º–æ –∑–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∏–º–∏ ID
var marker0 = markers.find(m => m.id === 0);
var marker1 = markers.find(m => m.id === 1);
```

---

## 7. –í–∏—Å–Ω–æ–≤–∫–∏

### 7.1. –ü–µ—Ä–µ–≤–∞–≥–∏ ArUco-–º–∞—Ä–∫–µ—Ä—ñ–≤

1. **–ë—ñ–ª—å—à–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤** (–¥–æ 1000+)
2. **–ö—Ä–∞—â–∞ —Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫** (–≤—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞)
3. **–°—É—á–∞—Å–Ω—ñ—à—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏** –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è
4. **–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö —Å–ª–æ–≤–Ω–∏–∫—ñ–≤**
5. **–ù–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ AR.js** (–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ Node.js)
6. **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Å–ª–æ–≤–Ω–∏–∫—ñ–≤** (ARUCO, AprilTag, ARTag, —Ç–æ—â–æ)

### 7.2. –ù–µ–¥–æ–ª—ñ–∫–∏

1. **–ù–µ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∑ AR.js** (–ø–æ—Ç—Ä—ñ–±–Ω–∞ –æ–∫—Ä–µ–º–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Three.js)
2. **–í–∏–º–∞–≥–∞—î –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫** (posit1.js, svd.js)
3. **–ë—ñ–ª—å—à —Å–∫–ª–∞–¥–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è** (—Å–ª–æ–≤–Ω–∏–∫–∏, —Ä–æ–∑–º—ñ—Ä–∏ –º–∞—Ä–∫–µ—Ä—ñ–≤)

### 7.3. –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ ArUco –∑–∞–º—ñ—Å—Ç—å barcode

- **–ü–æ—Ç—Ä—ñ–±–Ω–æ –±–∞–≥–∞—Ç–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤** (>512)
- **–í–∞–∂–ª–∏–≤–∞ —Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ –ø–æ–º–∏–ª–æ–∫** (–ø–æ–≥–∞–Ω–µ –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è, –∫—É—Ç–∏ –æ–≥–ª—è–¥—É)
- **–ü–æ—Ç—Ä—ñ–±–Ω–∞ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤**
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ–∑–∞ –±—Ä–∞—É–∑–µ—Ä–æ–º** (Node.js, —Å–µ—Ä–≤–µ—Ä–Ω–∞ –æ–±—Ä–æ–±–∫–∞)
- **–ü–æ—Ç—Ä—ñ–±–Ω–∞ –∫—Ä–∞—â–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** (–¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –æ–¥–Ω–∏–º –≤–∏–∫–ª–∏–∫–æ–º)

---

## 8. –ì–ª–æ—Å–∞—Ä—ñ–π —Ç–µ—Ä–º—ñ–Ω—ñ–≤

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| **ArUco** | –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –∑ –∫–æ–¥–æ–≤–∞–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é |
| **js-aruco2** | JavaScript –ø–æ—Ä—Ç –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ ArUco –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö —Å–ª–æ–≤–Ω–∏–∫—ñ–≤ |
| **–°–ª–æ–≤–Ω–∏–∫ (Dictionary)** | –ù–∞–±—ñ—Ä –∫–æ–¥—ñ–≤ –º–∞—Ä–∫–µ—Ä—ñ–≤ –∑ –≤–∏–∑–Ω–∞—á–µ–Ω–æ—é –≤—ñ–¥—Å—Ç–∞–Ω–Ω—é –•–µ–º–º—ñ–Ω–≥–∞ |
| **–í—ñ–¥—Å—Ç–∞–Ω—å –•–µ–º–º—ñ–Ω–≥–∞** | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç, —è–∫—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–æ–º–∏–ª–∫–æ–≤–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω—ñ |
| **POSIT** | Pose from Orthography and Scaling with ITeration - –∞–ª–≥–æ—Ä–∏—Ç–º –æ—Ü—ñ–Ω–∫–∏ 3D –ø–æ–∑–∏ |
| **POS** | Pose from Orthography and Scaling - –ø–æ—á–∞—Ç–∫–æ–≤–∞ –æ—Ü—ñ–Ω–∫–∞ –±–µ–∑ —ñ—Ç–µ—Ä–∞—Ü—ñ–π |
| **–ì–æ–º–æ–≥—Ä–∞—Ñ—ñ—è** | –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–ª—è –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –º–∞—Ä–∫–µ—Ä–∞ |
| **–ê–ø—Ä–æ–∫—Å–∏–º–∞—Ü—ñ—è –ø–æ–ª—ñ–≥–æ–Ω—É** | –ó–º–µ–Ω—à–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–æ—á–æ–∫ —É –∫–æ–Ω—Ç—É—Ä—ñ –∑—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º —Ñ–æ—Ä–º–∏ (Douglas-Peucker) |
| **–ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –ø–æ—Ä—ñ–≥** | –ü–æ—Ä–æ–≥–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –∑ –ª–æ–∫–∞–ª—å–Ω–∏–º –ø–æ—Ä–æ–≥–æ–º –¥–ª—è –∫—Ä–∞—â–æ—ó —Ä–æ–±–æ—Ç–∏ –ø—Ä–∏ –∑–º—ñ–Ω–Ω–æ–º—É –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—ñ |
| **SVD** | Singular Value Decomposition - –º–µ—Ç–æ–¥ —Ä–æ–∑–≤'—è–∑–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º –ª—ñ–Ω—ñ–π–Ω–∏—Ö —Ä—ñ–≤–Ω—è–Ω—å |

---

## 9. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ POSIT (posit1.js vs posit2.js)

–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ js-aruco2 –º—ñ—Å—Ç–∏—Ç—å **–¥–≤—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∞–ª–≥–æ—Ä–∏—Ç–º—É POSIT**: `posit1.js` —Ç–∞ `posit2.js`. –û–±–∏–¥–≤—ñ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å –æ–¥–∏–Ω —ñ —Ç–æ–π –∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º, –∞–ª–µ –∑ –¥–µ—è–∫–∏–º–∏ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—è–º–∏.

### 9.1. –°–ø—ñ–ª—å–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

**–û–±–∏–¥–≤–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∏:**
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **POS (Pose from Orthography and Scaling)** –¥–ª—è –ø–æ—á–∞—Ç–∫–æ–≤–æ—ó –æ—Ü—ñ–Ω–∫–∏
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **—ñ—Ç–µ—Ä–∞—Ç–∏–≤–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è (POSIT)** –¥–ª—è –∫—Ä–∞—â–æ—ó —Ç–æ—á–Ω–æ—Å—Ç—ñ
- ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—é—Ç—å **–¥–≤–∞ –º–æ–∂–ª–∏–≤–∏—Ö —Ä—ñ—à–µ–Ω–Ω—è** (best —Ç–∞ alternative)
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **SVD –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü—ñ—é** –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –ø—Å–µ–≤–¥–æ–æ–±–µ—Ä–Ω–µ–Ω–æ—ó –º–∞—Ç—Ä–∏—Ü—ñ
- ‚úÖ –ü—Ä–∞—Ü—é—é—Ç—å –∑ **4 –∫–æ–ø–ª–∞–Ω–∞—Ä–Ω–∏–º–∏ —Ç–æ—á–∫–∞–º–∏** (–∫—É—Ç–∏ –º–∞—Ä–∫–µ—Ä–∞)

### 9.2. –ö–ª—é—á–æ–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | posit1.js | posit2.js |
|----------------|-----------|-----------|
| **–†—ñ–∫ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è** | 2012 | 2012 |
| **–ü–æ—Å–∏–ª–∞–Ω–Ω—è** | "Iterative Pose Estimation using Coplanar Feature Points" | "3D Pose Estimation" (Andrew Kirillow) |
| **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö** | –ú–∞—Å–∏–≤–∏ JavaScript | –ö–ª–∞—Å–∏ Vec3, Mat3 |
| **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è** | `objectPoints`, `objectVectors`, `objectNormal` | `model`, `modelVectors`, `modelNormal` |
| **–ú–µ—Ç–æ–¥ —ñ—Ç–µ—Ä–∞—Ü—ñ—ó** | `iterate()` –∑ `error()` | `iterate()` –∑ `getError()` |
| **–ö—Ä–∏—Ç–µ—Ä—ñ–π –∑–±—ñ–∂–Ω–æ—Å—Ç—ñ** | `delta < 0.01` –∞–±–æ `error.pixels === 0` | `error <= 2.0` –∞–±–æ `error > prevError` |
| **–ú–∞–∫—Å–∏–º—É–º —ñ—Ç–µ—Ä–∞—Ü—ñ–π** | 100 | 100 |
| **–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É** | `POS.Pose` –∑ pixel error | `POS.Pose` –∑ euclidean error |

### 9.3. –î–µ—Ç–∞–ª—å–Ω–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è

#### 9.3.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö

**posit1.js:**
```javascript
// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–≤–∏—á–∞–π–Ω–∏—Ö –º–∞—Å–∏–≤—ñ–≤
this.objectPoints = this.buildModel(modelSize);
// [[-half, half, 0], [half, half, 0], ...]

this.objectVectors = [];
this.objectMatrix = [[],[],[]];

// –û–ø–µ—Ä–∞—Ü—ñ—ó –∑ –≤–µ–∫—Ç–æ—Ä–∞–º–∏
i0[i] += this.objectMatrix[i][j] * imageVectors[j][0];
```

**posit2.js:**
```javascript
// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤
this.model = this.buildModel(modelSize);
// [new Vec3(-half, half, 0), new Vec3(half, half, 0), ...]

this.modelVectors = Mat3.fromRows(...);
this.modelPseudoInverse = Mat3.mult(...);

// –û–ø–µ—Ä–∞—Ü—ñ—ó –∑ –≤–µ–∫—Ç–æ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ –∫–ª–∞—Å–∏
i = Vec3.add(i0, Vec3.multScalar(this.modelNormal, lambda));
```

#### 9.3.2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

**posit1.js:**
```javascript
POS.Posit.prototype.init = function(){
  var np = this.objectPoints.length,
      vectors = [], n = [], len = 0.0, row = 2, i;

  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ –º—ñ–∂ —Ç–æ—á–∫–∞–º–∏
  for (i = 0; i < np; ++ i){
    this.objectVectors[i] = [
      this.objectPoints[i][0] - this.objectPoints[0][0],
      this.objectPoints[i][1] - this.objectPoints[0][1],
      this.objectPoints[i][2] - this.objectPoints[0][2]
    ];
  }

  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –Ω–æ—Ä–º–∞–ª—ñ —á–µ—Ä–µ–∑ –≤–µ–∫—Ç–æ—Ä–Ω–∏–π –¥–æ–±—É—Ç–æ–∫
  while(0.0 === len){
    n[0] = this.objectVectors[1][1] * this.objectVectors[row][2] -
           this.objectVectors[1][2] * this.objectVectors[row][1];
    // ...
    len = Math.sqrt(n[0] * n[0] + n[1] * n[1] + n[2] * n[2]);
    ++ row;
  }

  // –ü—Å–µ–≤–¥–æ–æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è —á–µ—Ä–µ–∑ SVD
  POS.pseudoInverse(vectors, np, this.objectMatrix);
};
```

**posit2.js:**
```javascript
POS.Posit.prototype.init = function(){
  var d = new Vec3(), v = new Mat3(), u;

  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ –º—ñ–∂ —Ç–æ—á–∫–∞–º–∏ —á–µ—Ä–µ–∑ –∫–ª–∞—Å–∏
  this.modelVectors = Mat3.fromRows(
      Vec3.sub(this.model[1], this.model[0]),
      Vec3.sub(this.model[2], this.model[0]),
      Vec3.sub(this.model[3], this.model[0]) );

  u = Mat3.clone(this.modelVectors);

  // SVD –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü—ñ—è
  SVD.svdcmp(u.m, 3, 3, d.v, v.m);

  // –ü—Å–µ–≤–¥–æ–æ–±–µ—Ä–Ω–µ–Ω–∞ –º–∞—Ç—Ä–∏—Ü—è
  this.modelPseudoInverse = Mat3.mult(
    Mat3.mult(v, Mat3.fromDiagonal( Vec3.inverse(d) ) ), 
    Mat3.transpose(u) );

  // –ù–æ—Ä–º–∞–ª—å —á–µ—Ä–µ–∑ SVD
  this.modelNormal = v.column( d.minIndex() );
};
```

#### 9.3.3. –ú–µ—Ç–æ–¥ POS (–ø–æ—á–∞—Ç–∫–æ–≤–∞ –æ—Ü—ñ–Ω–∫–∞)

**posit1.js:**
```javascript
POS.Posit.prototype.pos = function(imagePoints, rotation1, rotation2, translation){
  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è i0 —Ç–∞ j0 —á–µ—Ä–µ–∑ objectMatrix
  for (i = 0; i < 3; ++ i){
    i0[i] = 0.0;
    for (j = 0; j < np; ++ j){
      i0[i] += this.objectMatrix[i][j] * imageVectors[j][0];
      j0[i] += this.objectMatrix[i][j] * imageVectors[j][1];
    }
  }

  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è lambda —Ç–∞ mu
  delta = (j0j0 - i0i0) * (j0j0 - i0i0) + 4.0 * (i0j0 * i0j0);
  
  if (j0j0 - i0i0 >= 0.0){
    q = (j0j0 - i0i0 + Math.sqrt(delta) ) / 2.0;
  }else{
    q = (j0j0 - i0i0 - Math.sqrt(delta) ) / 2.0;
  }
  
  lambda = Math.sqrt(q);
  mu = -i0j0 / lambda;

  // –ü–µ—Ä—à–µ –æ–±–µ—Ä—Ç–∞–Ω–Ω—è
  for (i = 0; i < 3; ++ i){
    ivec[i] = i0[i] + lambda * this.objectNormal[i];
    jvec[i] = j0[i] + mu * this.objectNormal[i];
  }
  // ...
};
```

**posit2.js:**
```javascript
POS.Posit.prototype.pos = function(points, eps, rotation1, rotation2, translation1, translation2){
  // –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–ª–∞—Å—ñ–≤ Vec3 —Ç–∞ Mat3
  var xi = new Vec3(points[1].x, points[2].x, points[3].x),
      yi = new Vec3(points[1].y, points[2].y, points[3].y),
      xs = Vec3.addScalar( Vec3.mult(xi, eps), -points[0].x),
      ys = Vec3.addScalar( Vec3.mult(yi, eps), -points[0].y);

  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –ø—Å–µ–≤–¥–æ–æ–±–µ—Ä–Ω–µ–Ω—É –º–∞—Ç—Ä–∏—Ü—é
  var i0 = Mat3.multVector(this.modelPseudoInverse, xs),
      j0 = Mat3.multVector(this.modelPseudoInverse, ys);

  // –Ü–Ω–∞–∫—à–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è r —Ç–∞ theta
  var s = j0.square() - i0.square(),
      ij = Vec3.dot(i0, j0);
  
  if (0.0 === s){
    r = Math.sqrt( Math.abs(2.0 * ij) );
    theta = (-Math.PI / 2.0) * (ij < 0.0? -1: (ij > 0.0? 1.0: 0.0) );
  }else{
    r = Math.sqrt( Math.sqrt(s * s + 4.0 * ij * ij) );
    theta = Math.atan(-2.0 * ij / s);
  }
  
  lambda = r * Math.cos(theta);
  mu = r * Math.sin(theta);
  // ...
};
```

#### 9.3.4. –Ü—Ç–µ—Ä–∞—Ç–∏–≤–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è (POSIT)

**posit1.js:**
```javascript
POS.Posit.prototype.iterate = function(imagePoints, posRotation, posTranslation, 
                                       rotation, translation){
  // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–º—ñ–Ω–Ω–∏—Ö
  for (i = 0; i < np; ++ i){
    oldSopImagePoints[i] = {x: imagePoints[i].x, y: imagePoints[i].y};
  }

  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è SOP (Scaled Orthographic Projection)
  for (i = 0; i < np; ++ i){
    factor = 0.0;
    for (j = 0; j < 3; ++ j){
      factor += this.objectVectors[i][j] * rotation[2][j] / translation[2];
    }
    sopImagePoints[i] = {
      x: (1.0 + factor) * imagePoints[i].x,
      y: (1.0 + factor) * imagePoints[i].y
    };
  }

  // –Ü—Ç–µ—Ä–∞—Ü—ñ—ó –¥–æ –∑–±—ñ–∂–Ω–æ—Å—Ç—ñ
  for (iteration = 0; iteration < 100 && !converged; ++iteration){
    // ...
    converged = (0.0 === error1.pixels) || (imageDifference < 0.01);
  }

  return error;
};
```

**posit2.js:**
```javascript
POS.Posit.prototype.iterate = function(points, rotation, translation){
  var prevError = Infinity, i = 0, eps, error, error1, error2;

  // –Ü—Ç–µ—Ä–∞—Ü—ñ—ó –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –≤–∏–±–æ—Ä–æ–º –∫—Ä–∞—â–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è
  for (; i < 100; ++ i){
    // –û–±—á–∏—Å–ª–µ–Ω–Ω—è eps –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∏
    eps = Vec3.addScalar( Vec3.multScalar(
      Mat3.multVector(this.modelVectors, rotation.row(2)), 
      1.0 / translation.v[2]), 1.0);

    // POS –∑ –Ω–æ–≤–∏–º–∏ eps
    this.pos(points, eps, rotation1, rotation2, translation1, translation2);

    // –í–∏–±—ñ—Ä –∫—Ä–∞—â–æ–≥–æ —Ä—ñ—à–µ–Ω–Ω—è
    error1 = this.getError(points, rotation1, translation1);
    error2 = this.getError(points, rotation2, translation2);

    if (error1 < error2){
      rotation.copy(rotation1);
      translation.copy(translation1);
      error = error1;
    }else{
      rotation.copy(rotation2);
      translation.copy(translation2);
      error = error2;
    }

    // –ö—Ä–∏—Ç–µ—Ä—ñ–π –∑–±—ñ–∂–Ω–æ—Å—Ç—ñ
    if ( (error <= 2.0) || (error > prevError) ){
      break;
    }

    prevError = error;
  }

  return error;
};
```

#### 9.3.5. –û–±—á–∏—Å–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏

**posit1.js:**
```javascript
POS.Posit.prototype.error = function(imagePoints, rotation, translation){
  // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ
  if ( !this.isValid(rotation, translation) ){
    return {euclidean: -1.0, pixels: -1, maximum: -1.0};
  }

  // –ü—Ä–æ–µ–∫—Ü—ñ—è 3D —Ç–æ—á–æ–∫ –Ω–∞ 2D –ø–ª–æ—â–∏–Ω—É
  for (i = 0; i < np; ++ i){
    projection[i] = {
      x: this.focalLength * move[i][0] / move[i][2],
      y: this.focalLength * move[i][1] / move[i][2]
    };
  }

  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è —Ç—Ä—å–æ—Ö —Ç–∏–ø—ñ–≤ –ø–æ–º–∏–ª–æ–∫
  euclidean = 0.0;  // –ï–≤–∫–ª—ñ–¥–æ–≤–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å
  pixels = 0.0;     // –í—ñ–¥—Å—Ç–∞–Ω—å —É –ø—ñ–∫—Å–µ–ª—è—Ö
  maximum = 0.0;    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –ø–æ–º–∏–ª–∫–∞

  for (i = 0; i < np; ++ i){
    errorvec[i] = Math.sqrt(
      (projection[i].x - imagePoints[i].x) ** 2 + 
      (projection[i].y - imagePoints[i].y) ** 2
    );
    euclidean += errorvec[i];
    pixels += errorvec[i] * this.focalLength / move[i][2];
    maximum = Math.max(maximum, errorvec[i]);
  }

  return {euclidean: euclidean, pixels: pixels, maximum: maximum};
};
```

**posit2.js:**
```javascript
POS.Posit.prototype.getError = function(points, rotation, translation){
  // –ü—Ä–æ–µ–∫—Ü—ñ—è 3D —Ç–æ—á–æ–∫ –Ω–∞ 2D –ø–ª–æ—â–∏–Ω—É
  v1 = Vec3.add( Mat3.multVector(rotation, this.model[0]), translation);
  v1[0] *= this.focalLength / v1[2];
  v1[1] *= this.focalLength / v1[2];
  // ...

  modeled = [
    {x: v1[0], y: v1[1]},
    {x: v2[0], y: v2[1]},
    // ...
  ];

  // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ —á–µ—Ä–µ–∑ –∫—É—Ç–∏ –º—ñ–∂ —Ç–æ—á–∫–∞–º–∏
  ia1 = this.angle( points[0], points[1], points[3] );
  ia2 = this.angle( points[1], points[2], points[0] );
  // ...

  ma1 = this.angle( modeled[0], modeled[1], modeled[3] );
  ma2 = this.angle( modeled[1], modeled[2], modeled[0] );
  // ...

  // –°–µ—Ä–µ–¥–Ω—è –ø–æ–º–∏–ª–∫–∞ –∫—É—Ç—ñ–≤
  return ( Math.abs(ia1 - ma1) +
           Math.abs(ia2 - ma2) +
           Math.abs(ia3 - ma3) +
           Math.abs(ia4 - ma4) ) / 4.0;
};

POS.Posit.prototype.angle = function(a, b, c){
  var x1 = b.x - a.x, y1 = b.y - a.y,
      x2 = c.x - a.x, y2 = c.y - a.y;

  return Math.acos( (x1 * x2 + y1 * y2) /
    (Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2) ) ) * 
    180.0 / Math.PI;
};
```

### 9.4. –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | posit1.js | posit2.js |
|---------|-----------|-----------|
| **–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –æ–±—Ä–æ–±–∫–∏** | ~0.5-1.0 –º—Å | ~0.6-1.2 –º—Å |
| **–ö—ñ–ª—å–∫—ñ—Å—Ç—å —ñ—Ç–µ—Ä–∞—Ü—ñ–π** | 3-7 | 4-8 |
| **–¢–æ—á–Ω—ñ—Å—Ç—å (pixels)** | 0.1-2.0 | 0.2-2.5 |
| **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ** | –ú–µ–Ω—à–µ (–º–∞—Å–∏–≤–∏) | –ë—ñ–ª—å—à–µ (–∫–ª–∞—Å–∏) |

### 9.5. –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–∂–Ω—É –≤–µ—Ä—Å—ñ—é

**–û–±–∏—Ä–∞–π—Ç–µ posit1.js, —è–∫—â–æ:**
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- ‚úÖ –ü—Ä–∞—Ü—é—î—Ç–µ –∑ –æ–±–º–µ–∂–µ–Ω–æ—é –ø–∞–º'—è—Ç—Ç—é
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –±—ñ–ª—å—à–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å —É –ø—ñ–∫—Å–µ–ª—è—Ö
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –∑ÊñáÁåÆ [Oberkampf et al.]

**–û–±–∏—Ä–∞–π—Ç–µ posit2.js, —è–∫—â–æ:**
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –∫—Ä–∞—â–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å –∫–æ–¥—É (–∫–ª–∞—Å–∏ Vec3, Mat3)
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –º–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ —Ä–æ–∑—à–∏—Ä—é–≤–∞–Ω—ñ—Å—Ç—å
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ø—ñ–¥—Ö—ñ–¥ –∑ÊñáÁåÆ [Kirillow]
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –æ–±'—î–∫—Ç–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### 9.6. –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

**posit1.js:**
```javascript
var posit = new POS.Posit(modelSize, focalLength);
var pose = posit.pose(corners);

if (pose.bestError.pixels < 5.0) {
    console.log('Best pose:', {
        rotation: pose.bestRotation,
        translation: pose.bestTranslation
    });
}
```

**posit2.js:**
```javascript
var posit = new POS.Posit(modelSize, focalLength);
var pose = posit.pose(corners);

if (pose.bestError < 2.0) {
    console.log('Best pose:', {
        rotation: pose.bestRotation,
        translation: pose.bestTranslation
    });
}
```

---

## 10. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è POSIT: AR.js (artoolkit) vs js-aruco2

–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ **AR.js (artoolkit)** —Ç–∞ **js-aruco2** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ä—ñ–∑–Ω—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∞–ª–≥–æ—Ä–∏—Ç–º—É POSIT –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ 3D –ø–æ–∑–∏ –º–∞—Ä–∫–µ—Ä—ñ–≤.

### 10.1. –°–ø—ñ–ª—å–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

**–û–±–∏–¥–≤—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **POSIT** (Pose from Orthography and Scaling with ITeration)
- ‚úÖ –ü—Ä–∞—Ü—é—é—Ç—å –∑ **4 –∫–æ–ø–ª–∞–Ω–∞—Ä–Ω–∏–º–∏ —Ç–æ—á–∫–∞–º–∏** (–∫—É—Ç–∏ –º–∞—Ä–∫–µ—Ä–∞)
- ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—é—Ç—å **–º–∞—Ç—Ä–∏—Ü—é –æ–±–µ—Ä—Ç–∞–Ω–Ω—è 3√ó3** —Ç–∞ **–≤–µ–∫—Ç–æ—Ä –ø–æ–∑–∏—Ü—ñ—ó (X, Y, Z)**
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **—ñ—Ç–µ—Ä–∞—Ç–∏–≤–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è** –¥–ª—è –∫—Ä–∞—â–æ—ó —Ç–æ—á–Ω–æ—Å—Ç—ñ
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –∑ **Three.js** –¥–ª—è 3D –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó

### 10.2. –ö–ª—é—á–æ–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | AR.js (artoolkit) | js-aruco2 |
|----------------|-------------------|-----------|
| **–ü–æ—Ö–æ–¥–∂–µ–Ω–Ω—è** | ARToolKit (C++ ‚Üí Emscripten) | –ß–∏—Å—Ç–∏–π JavaScript |
| **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** | –í–±—É–¥–æ–≤–∞–Ω–∏–π —É artoolkit.js | –û–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏ posit1.js, posit2.js |
| **–î–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è** | –®–∞–±–ª–æ–Ω–Ω–µ (pattern matching) | –ö–æ–Ω—Ç—É—Ä–∏ + –∞–ø—Ä–æ–∫—Å–∏–º–∞—Ü—ñ—è |
| **–û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π** | –ü–æ–¥—ñ—ó (`addEventListener`) | –ü—Ä—è–º–∏–π –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ–π |
| **–ì–ª–∞–¥–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è** | `getTransMatSquareCont()` | –ù–µ–º–∞—î (—Ç—ñ–ª—å–∫–∏ –ø–æ–≤–Ω–µ –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è) |
| **–ö—Ä–∏—Ç–µ—Ä—ñ–π –∑–±—ñ–∂–Ω–æ—Å—Ç—ñ** | –í–±—É–¥–æ–≤–∞–Ω–∏–π —É C++ –∫–æ–¥ | `delta < 0.01` –∞–±–æ `error <= 2.0` |
| **–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É** | –ú–∞—Ç—Ä–∏—Ü—è 4√ó4 (Float32Array) | `POS.Pose` –æ–±'—î–∫—Ç |
| **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ –∫–∞–º–µ—Ä–∏** | –í–∏–º–∞–≥–∞—î `camera_para.dat` | –¢—ñ–ª—å–∫–∏ focal length |

### 10.3. –î–µ—Ç–∞–ª—å–Ω–µ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è

#### 10.3.1. –ü—Ä–æ—Ü–µ—Å –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –ø–æ–∑–∏

**AR.js (artoolkit):**
```
1. detectMarker() ‚Üí –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –º–∞—Ä–∫–µ—Ä–∏ –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ
2. getMarker(i) ‚Üí –æ—Ç—Ä–∏–º—É—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –º–∞—Ä–∫–µ—Ä
3. trackBarcodeMarkerId() ‚Üí —Ä–µ—î—Å—Ç—Ä—É—î –º–∞—Ä–∫–µ—Ä –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è
4. getTransMatSquare() / getTransMatSquareCont() ‚Üí –æ–±—á–∏—Å–ª—é—î –º–∞—Ç—Ä–∏—Ü—é
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–±—É–¥–æ–≤–∞–Ω–∏–π C++ –∞–ª–≥–æ—Ä–∏—Ç–º —á–µ—Ä–µ–∑ Emscripten
   - –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è —à–≤–∏–¥–∫–æ–¥—ñ—ó (WebAssembly)
5. transMatToGLMat() ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç—É—î —É —Ñ–æ—Ä–º–∞—Ç Three.js
6. dispatchEvent('getMarker') ‚Üí –≥–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—é –∑ –º–∞—Ç—Ä–∏—Ü–µ—é
```

**js-aruco2:**
```
1. detector.detect(imageData) ‚Üí –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –º–∞—Ä–∫–µ—Ä–∏
2. marker.corners ‚Üí –æ—Ç—Ä–∏–º—É—î 4 –∫—É—Ç–∏ –º–∞—Ä–∫–µ—Ä–∞
3. posit.pose(corners) ‚Üí –æ–±—á–∏—Å–ª—é—î –ø–æ–∑–∏—Ü—ñ—é
   - pos() ‚Üí –ø–æ—á–∞—Ç–∫–æ–≤–∞ –æ—Ü—ñ–Ω–∫–∞ (POS)
   - iterate() ‚Üí —ñ—Ç–µ—Ä–∞—Ç–∏–≤–Ω–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è (POSIT)
4. pose.bestRotation, pose.bestTranslation ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Three.js —á–µ—Ä–µ–∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```

#### 10.3.2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è POSIT

**AR.js (artoolkit):**
```javascript
// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ artoolkit.js (C++ –∫–æ–¥)
// –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–∞—î –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ POSIT

arToolkitContext = new THREEx.ArToolkitContext({
    trackingBackend: 'artoolkit',
    detectionMode: 'mono_and_matrix',
    matrixCodeType: "3x3",
    canvasWidth: 640,
    canvasHeight: 480
});

// POSIT —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –¥–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—ñ
// –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∫–∞–º–µ—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ camera_para.dat
```

**js-aruco2:**
```javascript
// –Ø–≤–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è POSIT
var posit = new POS.Posit(modelSize, focalLength);

// modelSize - —Ä–æ–∑–º—ñ—Ä –º–∞—Ä–∫–µ—Ä–∞ –≤ –º–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 30.0)
// focalLength - —Ñ–æ–∫—É—Å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å —É –ø—ñ–∫—Å–µ–ª—è—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 640)

// –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: –≤–∏–±—ñ—Ä —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó
// var posit = new POS.Posit(modelSize, focalLength); // posit1.js
// var posit = new POS.Posit(modelSize, focalLength); // posit2.js
```

#### 10.3.3. –û–±—á–∏—Å–ª–µ–Ω–Ω—è –º–∞—Ç—Ä–∏—Ü—ñ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó

**AR.js (artoolkit):**
```javascript
// –í–∏–∫–ª–∏–∫ –∑ C++ –∫–æ–¥—É —á–µ—Ä–µ–∑ Emscripten
// –í–±—É–¥–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –∑ artoolkit.js

if (markerType !== artoolkit.UNKNOWN_MARKER && visible.inPrevious) {
    // –ì–ª–∞–¥–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ–ø–µ—Ä–µ–¥–Ω—é –º–∞—Ç—Ä–∏—Ü—é)
    this.getTransMatSquareCont(i, visible.markerWidth, 
                               visible.matrix, visible.matrix);
} else {
    // –ù–æ–≤–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è (–∑ –Ω—É–ª—è)
    this.getTransMatSquare(i, visible.markerWidth, visible.matrix);
}

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —É —Ñ–æ—Ä–º–∞—Ç Three.js (4√ó4 –º–∞—Ç—Ä–∏—Ü—è)
this.transMatToGLMat(visible.matrix, this.transform_mat);

// –†–µ–∑—É–ª—å—Ç–∞—Ç: Float32Array –∑ 16 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
// [0.985, -0.165, 0.052, 0.12, 0.028, 0.098, -0.995, 0.05, ...]
```

**js-aruco2:**
```javascript
// –í–∏–∫–ª–∏–∫ JavaScript —Ñ—É–Ω–∫—Ü—ñ—ó
var pose = posit.pose(corners);

// corners - –º–∞—Å–∏–≤ –∑ 4 –∫—É—Ç–∞–º–∏ –º–∞—Ä–∫–µ—Ä–∞
// [{x: 245, y: 180}, {x: 395, y: 185}, {x: 390, y: 305}, {x: 240, y: 300}]

// –†–µ–∑—É–ª—å—Ç–∞—Ç: –æ–±'—î–∫—Ç POS.Pose
{
    bestError: 0.5,              // –ü–æ–º–∏–ª–∫–∞ —É –ø—ñ–∫—Å–µ–ª—è—Ö
    bestRotation: [[...], [...], [...]],  // –ú–∞—Ç—Ä–∏—Ü—è 3√ó3
    bestTranslation: [0.12, 0.05, 0.45],  // –í–µ–∫—Ç–æ—Ä (X, Y, Z)
    alternativeError: 2.3,
    alternativeRotation: [[...], [...], [...]],
    alternativeTranslation: [...]
}
```

#### 10.3.4. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Three.js

**AR.js (artoolkit):**
```javascript
// –û—Ç—Ä–∏–º–∞–Ω–Ω—è –º–∞—Ç—Ä–∏—Ü—ñ –∑ –ø–æ–¥—ñ—ó
arController.addEventListener('getMarker', function(event) {
    // event.data.matrix - Float32Array (16 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤)
    var modelViewMatrix = new THREE.Matrix4()
        .fromArray(event.data.matrix);

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó 3D –æ–±'—î–∫—Ç–∞
    markerObject3D.matrix.copy(modelViewMatrix);
    markerObject3D.matrix.decompose(
        markerObject3D.position,
        markerObject3D.quaternion,
        markerObject3D.scale
    );
});
```

**js-aruco2:**
```javascript
// –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó –∑ POS.Pose –æ–±'—î–∫—Ç–∞
var pose = posit.pose(corners);

// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Ç—Ä–∏—Ü—ñ –æ–±–µ—Ä—Ç–∞–Ω–Ω—è
var rotMatrix = new THREE.Matrix4();
rotMatrix.set(
    pose.bestRotation[0][0], pose.bestRotation[0][1], pose.bestRotation[0][2], 0,
    pose.bestRotation[1][0], pose.bestRotation[1][1], pose.bestRotation[1][2], 0,
    pose.bestRotation[2][0], pose.bestRotation[2][1], pose.bestRotation[2][2], 0,
    0, 0, 0, 1
);

// –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–≤–∞—Ç–µ—Ä–Ω—ñ–æ–Ω–∞ —Ç–∞ –ø–æ–∑–∏—Ü—ñ—ó
object.quaternion.setFromRotationMatrix(rotMatrix);
object.position.set(
    pose.bestTranslation[0],
    pose.bestTranslation[1],
    pose.bestTranslation[2]
);
```

#### 10.3.5. –ì–ª–∞–¥–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è (Smooth Tracking)

**AR.js (artoolkit):**
```javascript
// –í–±—É–¥–æ–≤–∞–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –≥–ª–∞–¥–∫–æ—ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó
if (visible.inPrevious) {
    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ–ø–µ—Ä–µ–¥–Ω—é –º–∞—Ç—Ä–∏—Ü—é –¥–ª—è —à–≤–∏–¥—à–æ—ó –∑–±—ñ–∂–Ω–æ—Å—Ç—ñ
    this.getTransMatSquareCont(i, visible.markerWidth, 
                               visible.matrix, visible.matrix);
    // 1-2 —ñ—Ç–µ—Ä–∞—Ü—ñ—ó –∑–∞–º—ñ—Å—Ç—å 5-7
} else {
    // –ü–æ–≤–Ω–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∑ –Ω—É–ª—è
    this.getTransMatSquare(i, visible.markerWidth, visible.matrix);
    // 5-7 —ñ—Ç–µ—Ä–∞—Ü—ñ–π
}
```

**js-aruco2:**
```javascript
// –ù–µ–º–∞—î –≤–±—É–¥–æ–≤–∞–Ω–æ—ó –≥–ª–∞–¥–∫–æ—ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó
// –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–∏–Ω–µ–Ω —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–∞–º:

var previousPose = null;

function updatePose(corners) {
    var pose = posit.pose(corners);

    if (previousPose) {
        // –Ü–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü—ñ—è –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—é –ø–æ–∑–∏—Ü—ñ—î—é (LERP)
        object.position.lerp(previousPose.position, 0.5);
        object.quaternion.slerp(previousPose.quaternion, 0.5);
    } else {
        // –ü—Ä—è–º–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
        object.position.copy(pose.position);
        object.quaternion.copy(pose.quaternion);
    }

    previousPose = pose;
}
```

### 10.4. –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | AR.js (artoolkit) | js-aruco2 (posit1.js) | js-aruco2 (posit2.js) |
|---------|-------------------|----------------------|----------------------|
| **–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –æ–±—Ä–æ–±–∫–∏** | ~0.3-0.8 –º—Å | ~0.5-1.0 –º—Å | ~0.6-1.2 –º—Å |
| **–ö—ñ–ª—å–∫—ñ—Å—Ç—å —ñ—Ç–µ—Ä–∞—Ü—ñ–π** | 2-5 (–∑ –≥–ª–∞–¥–∫–æ—é) | 3-7 | 4-8 |
| **–¢–æ—á–Ω—ñ—Å—Ç—å (pixels)** | 0.1-1.5 | 0.1-2.0 | 0.2-2.5 |
| **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ** | –ë—ñ–ª—å—à–µ (WebAssembly) | –ú–µ–Ω—à–µ (–º–∞—Å–∏–≤–∏) | –ë—ñ–ª—å—à–µ (–∫–ª–∞—Å–∏) |
| **–†–æ–∑–º—ñ—Ä –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏** | ~500 KB (—Å—Ç–∏—Å–Ω–µ–Ω–æ) | ~50 KB | ~60 KB |

### 10.5. –ü–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –Ω–µ–¥–æ–ª—ñ–∫–∏

#### AR.js (artoolkit) POSIT

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
1. ‚úÖ **–í–±—É–¥–æ–≤–∞–Ω–∞ –≥–ª–∞–¥–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è** (`getTransMatSquareCont`)
2. ‚úÖ **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π C++ –∫–æ–¥** —á–µ—Ä–µ–∑ Emscripten (—à–≤–∏–¥—à–µ)
3. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** –∑ Three.js
4. ‚úÖ **–ì–æ—Ç–æ–≤—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π** (`addEventListener`)
5. ‚úÖ **–ö–∞–ª—ñ–±—Ä–æ–≤–∞–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∫–∞–º–µ—Ä–∏** –∑ `camera_para.dat`
6. ‚úÖ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ multi-–º–∞—Ä–∫–µ—Ä—ñ–≤** (–æ–¥–Ω–æ—á–∞—Å–Ω–µ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö)

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
1. ‚ùå **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ Emscripten** (—Å–∫–ª–∞–¥–Ω—ñ—à–µ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏)
2. ‚ùå **–í–∏–º–∞–≥–∞—î `camera_para.dat`** (–∫–∞–ª—ñ–±—Ä–æ–≤–æ—á–Ω–∏–π —Ñ–∞–π–ª)
6. ‚ùå **–ë—ñ–ª—å—à–∏–π —Ä–æ–∑–º—ñ—Ä –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏** (~500 KB)
7. ‚ùå **–ú–µ–Ω—à–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å** (–Ω–µ–º–∞—î –≤–∏–±–æ—Ä—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó POSIT)
8. ‚ùå **–°–∫–ª–∞–¥–Ω—ñ—à–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** –∑ —ñ–Ω—à–∏–º–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞–º–∏

#### js-aruco2 POSIT

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
1. ‚úÖ **–ß–∏—Å—Ç–∏–π JavaScript** (–ª–µ–≥—à–µ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏)
2. ‚úÖ **–î–≤—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó** (posit1.js, posit2.js)
3. ‚úÖ **–ú–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä** (~50-60 KB)
4. ‚úÖ **–ù–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ `camera_para.dat`** (—Ç—ñ–ª—å–∫–∏ focal length)
5. ‚úÖ **–ü—Ä–æ—Å—Ç—ñ—à–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** –∑ —ñ–Ω—à–∏–º–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞–º–∏
6. ‚úÖ **–û–±'—î–∫—Ç–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∏–π API** (–∫—Ä–∞—â–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å)

**–ù–µ–¥–æ–ª—ñ–∫–∏:**
1. ‚ùå **–ù–µ–º–∞—î –≤–±—É–¥–æ–≤–∞–Ω–æ—ó –≥–ª–∞–¥–∫–æ—ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó**
2. ‚ùå **–ü–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π** (—á–∏—Å—Ç–∏–π JavaScript)
3. ‚ùå **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–∏–Ω–µ–Ω —Å–∞–º —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏** –∑ Three.js
4. ‚ùå **–ù–µ–º–∞—î –≥–æ—Ç–æ–≤–∏—Ö –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ –ø–æ–¥—ñ–π**
5. ‚ùå **–ú–µ–Ω—à–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å** —É –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö

### 10.6. –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–∂–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é

**–û–±–∏—Ä–∞–π—Ç–µ AR.js (artoolkit) POSIT, —è–∫—â–æ:**
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –≥–ª–∞–¥–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è "–∑ –∫–æ—Ä–æ–±–∫–∏"
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ AR.js –¥–ª—è barcode/pattern –º–∞—Ä–∫–µ—Ä—ñ–≤
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Three.js "–∑ –∫–æ—Ä–æ–±–∫–∏"
- ‚úÖ –Ñ –∫–∞–ª—ñ–±—Ä–æ–≤–æ—á–Ω–∏–π —Ñ–∞–π–ª `camera_para.dat`
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ multi-–º–∞—Ä–∫–µ—Ä—ñ–≤

**–û–±–∏—Ä–∞–π—Ç–µ js-aruco2 POSIT, —è–∫—â–æ:**
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ AR.js
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –º–µ–Ω—à–∞ –≤–∞–≥–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å (–≤–∏–±—ñ—Ä posit1.js/posit2.js)
- ‚úÖ –ù–µ–º–∞—î `camera_para.dat`
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø—Ä–æ—Å—Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ–Ω—à–∏–º–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞–º–∏
- ‚úÖ –ü–æ—Ç—Ä—ñ–±–Ω–∞ –∫—Ä–∞—â–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å –∫–æ–¥—É

### 10.7. –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

**AR.js (artoolkit):**
```javascript
// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è AR-–∫–æ–Ω—Ç–µ–∫—Å—Ç—É
arToolkitContext = new THREEx.ArToolkitContext({
    trackingBackend: 'artoolkit',
    detectionMode: 'mono_and_matrix',
    matrixCodeType: "3x3"
});

// –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –º–∞—Ä–∫–µ—Ä–∞
arController.addEventListener('getMarker', function(event) {
    if (event.data.type === artoolkit.BARCODE_MARKER &&
        event.data.marker.idMatrix === markerId) {

        // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –º–∞—Ç—Ä–∏—Ü—ñ –∑ –ø–æ–¥—ñ—ó
        var modelViewMatrix = new THREE.Matrix4()
            .fromArray(event.data.matrix);

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è 3D –æ–±'—î–∫—Ç–∞
        markerObject3D.matrix.copy(modelViewMatrix);
        markerObject3D.matrix.decompose(
            markerObject3D.position,
            markerObject3D.quaternion,
            markerObject3D.scale
        );
    }
});
```

**js-aruco2:**
```javascript
// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ —Ç–∞ POSIT
var detector = new AR.Detector({
    dictionaryName: 'ARUCO_4X4_1000'
});
var posit = new POS.Posit(modelSize, focalLength);

// –î–µ—Ç–µ–∫—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –ø–æ–∑–∏
var markers = detector.detect(imageData);
var marker0 = markers.find(m => m.id === 0);

if (marker0) {
    // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –ø–æ–∑–∏ —á–µ—Ä–µ–∑ POSIT
    var pose = posit.pose(marker0.corners);

    // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Ç—Ä–∏—Ü—ñ –æ–±–µ—Ä—Ç–∞–Ω–Ω—è
    var rotMatrix = new THREE.Matrix4();
    rotMatrix.set(
        pose.bestRotation[0][0], pose.bestRotation[0][1], pose.bestRotation[0][2], 0,
        pose.bestRotation[1][0], pose.bestRotation[1][1], pose.bestRotation[1][2], 0,
        pose.bestRotation[2][0], pose.bestRotation[2][1], pose.bestRotation[2][2], 0,
        0, 0, 0, 1
    );

    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è 3D –æ–±'—î–∫—Ç–∞
    markerObject3D.quaternion.setFromRotationMatrix(rotMatrix);
    markerObject3D.position.set(
        pose.bestTranslation[0],
        pose.bestTranslation[1],
        pose.bestTranslation[2]
    );
}
```

---

## –î–æ–¥–∞—Ç–æ–∫ A: –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–∞–π–ª–∏

- **Det–µ–∫—Ç–æ—Ä ArUco:** `js-aruco2/src/aruco.js`
- **–û–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å:** `js-aruco2/src/cv.js`
- **–û—Ü—ñ–Ω–∫–∞ 3D –ø–æ–∑–∏:** `js-aruco2/src/posit1.js` –∞–±–æ `js-aruco2/src/posit2.js`
- **SVD –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü—ñ—è:** `js-aruco2/src/svd.js`
- **–°–ª–æ–≤–Ω–∏–∫–∏:** `js-aruco2/src/dictionaries/`

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑—É –∫–æ–¥—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ js-aruco2.*
